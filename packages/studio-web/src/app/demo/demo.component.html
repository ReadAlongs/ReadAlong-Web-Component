<section>
  <!-- <ng-template *ngIf="b64Inputs$ | async as b64Inputs"> -->
  <div class="container">
    <div class="row">
      <div class="col-9">
        <h2
          id="readalong-congratulations"
          i18n="Congratulations message"
          class="subtitle"
        >
          Congratulations! Here's your ReadAlong!
        </h2>
      </div>
      <div class="col-3 download__buttons">
        <mat-form-field class="d-none d-lg-block" appearance="fill">
          <mat-label i18n="Output format">Output Format</mat-label>
          <mat-select [(ngModel)]="selectedOutputFormat">
            <mat-option
              *ngFor="let format of outputFormats"
              [value]="format.value"
            >
              {{ format.display }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button
          class="download"
          color="primary"
          (click)="download()"
          mat-mini-fab
          aria-label="Example icon button with a download icon"
        >
          <mat-icon>file_download</mat-icon>
        </button>
      </div>
    </div>

    <div class="row">
      <p i18n="You can edit">You can edit the page title here:</p>
      <div id="newpagetitle">
        <input
          #pageTitle
          class="subtitle"
          [(ngModel)]="slots.pageTitle"
          [ngStyle]="{ 'width.ch': slots.pageTitle.length, 'min-width.ch': 25 }"
          style="border: none"
          (input)="onPageTitleChange($event)"
          placeholder="Enter your page title here"
        />
      </div>
    </div>

    <div class="row" *ngIf="b64Inputs">
      <read-along
        id="readalong"
        [language]="language"
        #readalong
        *ngIf="render$ | async"
        mode="EDIT"
        href="data:application/readalong+xml;base64,{{
          b64Service.xmlToB64(b64Inputs[1])
        }}"
        audio="{{ b64Inputs[0] }}"
        class="hydrated"
      >
        <input
          #title
          [(ngModel)]="slots.title"
          [ngStyle]="{ 'width.ch': slots.title.length, 'min-width.ch': 20 }"
          style="border: none"
          placeholder="Enter your title here"
          slot="read-along-header"
        />
        <input
          #subtitle
          [(ngModel)]="slots.subtitle"
          [ngStyle]="{ 'width.ch': slots.subtitle.length, 'min-width.ch': 20 }"
          style="border: none"
          placeholder="Enter your subtitle here"
          slot="read-along-subheader"
        />
      </read-along>
    </div>
    <div class="row"></div>
  </div>
  <!-- </ng-template> -->
</section>
