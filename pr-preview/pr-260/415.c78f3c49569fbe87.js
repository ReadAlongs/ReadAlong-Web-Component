"use strict";(self.webpackChunkstudio_web=self.webpackChunkstudio_web||[]).push([[415],{9415:(Ue,Q,C)=>{C.r(Q),C.d(Q,{read_along:()=>E});var I=C(5861),_=C(6964),L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K=function pe(i,r,a){return i(a={path:r,exports:{},require:function(t,l){return function ge(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},a.exports),a.exports}(function(i,r){!function(){var a=function(){this.init()};a.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||x(),typeof e<"u"&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var u=n._howls[o]._getSoundIds(),d=0;d<u.length;d++){var h=n._howls[o]._soundById(u[d]);h&&h._node&&(h._node.volume=h._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||x(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var u=n._howls[o]._getSoundIds(),d=0;d<u.length;d++){var h=n._howls[o]._soundById(u[d]);h&&h._node&&(h._node.muted=!!e||h._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,x()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return e}if(!n||"function"!=typeof n.canPlayType)return e;var o=n.canPlayType("audio/mpeg;").replace(/^no$/,""),u=e._navigator?e._navigator.userAgent:"",d=u.match(/OPR\/([0-6].)/g),h=d&&parseInt(d[0].split("/")[1],10)<33,c=-1!==u.indexOf("Safari")&&-1===u.indexOf("Chrome"),m=u.match(/Version\/(.*?) /),y=c&&m&&parseInt(m[1],10)<15;return e._codecs={mp3:!(h||!o&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(y||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(y||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(o){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var u=new Audio;u._unlocked=!0,e._releaseHtml5Audio(u)}catch{e.noAudio=!0;break}for(var d=0;d<e._howls.length;d++)if(!e._howls[d]._webAudio)for(var h=e._howls[d]._getSoundIds(),c=0;c<h.length;c++){var m=e._howls[d]._soundById(h[c]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}e._autoResume();var y=e.ctx.createBufferSource();y.buffer=e._scratchBuffer,y.connect(e.ctx.destination),typeof y.start>"u"?y.noteOn(0):y.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),y.onended=function(){y.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var A=0;A<e._howls.length;A++)e._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=(new Audio).play();return n&&typeof Promise<"u"&&(n instanceof Promise||"function"==typeof n.then)&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&!(typeof e.ctx.suspend>"u")&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var o=0;o<e._howls[n]._sounds.length;o++)if(!e._howls[n]._sounds[o]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var u=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(u,u)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&!(typeof e.ctx.resume>"u")&&t.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new a,l=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};l.prototype={init:function(e){var n=this;return t.ctx||x(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var e=this,n=null;if(t.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var u,d;if(e._format&&e._format[o])u=e._format[o];else{if("string"!=typeof(d=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(u=/^data:audio\/([^;,]+);/i.exec(d))||(u=/\.([^.]+)$/.exec(d.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&t.codecs(u)){n=e._src[o];break}}if(n)return e._src=n,e._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&p(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var o=this,u=null;if("number"==typeof e)u=e,e=null;else{if("string"==typeof e&&"loaded"===o._state&&!o._sprite[e])return null;if(typeof e>"u"&&(e="__default",!o._playLock)){for(var d=0,h=0;h<o._sounds.length;h++)o._sounds[h]._paused&&!o._sounds[h]._ended&&(d++,u=o._sounds[h]._id);1===d?e=null:u=null}}var c=u?o._soundById(u):o._inactiveSound();if(!c)return null;if(u&&!e&&(e=c._sprite||"__default"),"loaded"!==o._state){c._sprite=e,c._ended=!1;var m=c._id;return o._queue.push({event:"play",action:function(){o.play(m)}}),m}if(u&&!c._paused)return n||o._loadQueue("play"),c._id;o._webAudio&&t._autoResume();var y=Math.max(0,c._seek>0?c._seek:o._sprite[e][0]/1e3),A=Math.max(0,(o._sprite[e][0]+o._sprite[e][1])/1e3-y),k=1e3*A/Math.abs(c._rate),O=o._sprite[e][0]/1e3,H=(o._sprite[e][0]+o._sprite[e][1])/1e3;c._sprite=e,c._ended=!1;var Z=function(){c._paused=!1,c._seek=y,c._start=O,c._stop=H,c._loop=!(!c._loop&&!o._sprite[e][2])};if(!(y>=H)){var w=c._node;if(o._webAudio){var he=function(){o._playLock=!1,Z(),o._refreshBuffer(c),w.gain.setValueAtTime(c._muted||o._muted?0:c._volume,t.ctx.currentTime),c._playStart=t.ctx.currentTime,typeof w.bufferSource.start>"u"?w.bufferSource.noteGrainOn(0,y,c._loop?86400:A):w.bufferSource.start(0,y,c._loop?86400:A),k!==1/0&&(o._endTimers[c._id]=setTimeout(o._ended.bind(o,c),k)),n||setTimeout(function(){o._emit("play",c._id),o._loadQueue()},0)};"running"===t.state&&"interrupted"!==t.ctx.state?he():(o._playLock=!0,o.once("resume",he),o._clearTimer(c._id))}else{var fe=function(){w.currentTime=y,w.muted=c._muted||o._muted||t._muted||w.muted,w.volume=c._volume*t.volume(),w.playbackRate=c._rate;try{var P=w.play();if(P&&typeof Promise<"u"&&(P instanceof Promise||"function"==typeof P.then)?(o._playLock=!0,Z(),P.then(function(){o._playLock=!1,w._unlocked=!0,n?o._loadQueue():o._emit("play",c._id)}).catch(function(){o._playLock=!1,o._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),c._ended=!0,c._paused=!0})):n||(o._playLock=!1,Z(),o._emit("play",c._id)),w.playbackRate=c._rate,w.paused)return void o._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||c._loop?o._endTimers[c._id]=setTimeout(o._ended.bind(o,c),k):(o._endTimers[c._id]=function(){o._ended(c),w.removeEventListener("ended",o._endTimers[c._id],!1)},w.addEventListener("ended",o._endTimers[c._id],!1))}catch(je){o._emit("playerror",c._id,je)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===w.src&&(w.src=o._src,w.load());var $e=window&&window.ejecta||!w.readyState&&t._navigator.isCocoonJS;if(w.readyState>=3||$e)fe();else{o._playLock=!0,o._state="loading";var _e=function(){o._state="loaded",fe(),w.removeEventListener(t._canPlayEvent,_e,!1)};w.addEventListener(t._canPlayEvent,_e,!1),o._clearTimer(c._id)}}return c._id}o._ended(c)},pause:function(e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var o=n._getSoundIds(e),u=0;u<o.length;u++){n._clearTimer(o[u]);var d=n._soundById(o[u]);if(d&&!d._paused&&(d._seek=n.seek(o[u]),d._rateSeek=0,d._paused=!0,n._stopFade(o[u]),d._node))if(n._webAudio){if(!d._node.bufferSource)continue;typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),n._cleanBuffer(d._node)}else(!isNaN(d._node.duration)||d._node.duration===1/0)&&d._node.pause();arguments[1]||n._emit("pause",d?d._id:null)}return n},stop:function(e,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var u=o._getSoundIds(e),d=0;d<u.length;d++){o._clearTimer(u[d]);var h=o._soundById(u[d]);h&&(h._seek=h._start||0,h._rateSeek=0,h._paused=!0,h._ended=!0,o._stopFade(u[d]),h._node&&(o._webAudio?h._node.bufferSource&&(typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),o._cleanBuffer(h._node)):(!isNaN(h._node.duration)||h._node.duration===1/0)&&(h._node.currentTime=h._start||0,h._node.pause(),h._node.duration===1/0&&o._clearSound(h._node))),n||o._emit("stop",h._id))}return o},mute:function(e,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(e,n)}}),o;if(typeof n>"u"){if("boolean"!=typeof e)return o._muted;o._muted=e}for(var u=o._getSoundIds(n),d=0;d<u.length;d++){var h=o._soundById(u[d]);h&&(h._muted=e,h._interval&&o._stopFade(h._id),o._webAudio&&h._node?h._node.gain.setValueAtTime(e?0:h._volume,t.ctx.currentTime):h._node&&(h._node.muted=!!t._muted||e),o._emit("mute",h._id))}return o},volume:function(){var o,u,c,e=this,n=arguments;if(0===n.length)return e._volume;if(1===n.length||2===n.length&&typeof n[1]>"u"?e._getSoundIds().indexOf(n[0])>=0?u=parseInt(n[0],10):o=parseFloat(n[0]):n.length>=2&&(o=parseFloat(n[0]),u=parseInt(n[1],10)),!(typeof o<"u"&&o>=0&&o<=1))return(c=u?e._soundById(u):e._sounds[0])?c._volume:0;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}}),e;typeof u>"u"&&(e._volume=o),u=e._getSoundIds(u);for(var m=0;m<u.length;m++)(c=e._soundById(u[m]))&&(c._volume=o,n[2]||e._stopFade(u[m]),e._webAudio&&c._node&&!c._muted?c._node.gain.setValueAtTime(o,t.ctx.currentTime):c._node&&!c._muted&&(c._node.volume=o*t.volume()),e._emit("volume",c._id));return e},fade:function(e,n,o,u){var d=this;if("loaded"!==d._state||d._playLock)return d._queue.push({event:"fade",action:function(){d.fade(e,n,o,u)}}),d;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),o=parseFloat(o),d.volume(e,u);for(var h=d._getSoundIds(u),c=0;c<h.length;c++){var m=d._soundById(h[c]);if(m){if(u||d._stopFade(h[c]),d._webAudio&&!m._muted){var y=t.ctx.currentTime,A=y+o/1e3;m._volume=e,m._node.gain.setValueAtTime(e,y),m._node.gain.linearRampToValueAtTime(n,A)}d._startFadeInterval(m,e,n,o,h[c],typeof u>"u")}}return d},_startFadeInterval:function(e,n,o,u,d,h){var c=this,m=n,y=o-n,A=Math.abs(y/.01),k=Math.max(4,A>0?u/A:u),O=Date.now();e._fadeTo=o,e._interval=setInterval(function(){var H=(Date.now()-O)/u;O=Date.now(),m+=y*H,m=Math.round(100*m)/100,m=y<0?Math.max(o,m):Math.min(o,m),c._webAudio?e._volume=m:c.volume(m,e._id,!0),h&&(c._volume=m),(o<n&&m<=o||o>n&&m>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,c.volume(o,e._id),c._emit("fade",e._id))},k)},_stopFade:function(e){var n=this,o=n._soundById(e);return o&&o._interval&&(n._webAudio&&o._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(o._interval),o._interval=null,n.volume(o._fadeTo,e),o._fadeTo=null,n._emit("fade",e)),n},loop:function(){var o,u,d,e=this,n=arguments;if(0===n.length)return e._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(d=e._soundById(parseInt(n[0],10)))&&d._loop;e._loop=o=n[0]}else 2===n.length&&(o=n[0],u=parseInt(n[1],10));for(var h=e._getSoundIds(u),c=0;c<h.length;c++)(d=e._soundById(h[c]))&&(d._loop=o,e._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=o,o&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop,e.playing(h[c])&&(e.pause(h[c],!0),e.play(h[c],!0)))));return e},rate:function(){var o,u,c,e=this,n=arguments;if(0===n.length?u=e._sounds[0]._id:1===n.length?e._getSoundIds().indexOf(n[0])>=0?u=parseInt(n[0],10):o=parseFloat(n[0]):2===n.length&&(o=parseFloat(n[0]),u=parseInt(n[1],10)),"number"!=typeof o)return(c=e._soundById(u))?c._rate:e._rate;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}}),e;typeof u>"u"&&(e._rate=o),u=e._getSoundIds(u);for(var m=0;m<u.length;m++)if(c=e._soundById(u[m])){e.playing(u[m])&&(c._rateSeek=e.seek(u[m]),c._playStart=e._webAudio?t.ctx.currentTime:c._playStart),c._rate=o,e._webAudio&&c._node&&c._node.bufferSource?c._node.bufferSource.playbackRate.setValueAtTime(o,t.ctx.currentTime):c._node&&(c._node.playbackRate=o);var y=e.seek(u[m]),k=1e3*((e._sprite[c._sprite][0]+e._sprite[c._sprite][1])/1e3-y)/Math.abs(c._rate);(e._endTimers[u[m]]||!c._paused)&&(e._clearTimer(u[m]),e._endTimers[u[m]]=setTimeout(e._ended.bind(e,c),k)),e._emit("rate",c._id)}return e},seek:function(){var o,u,e=this,n=arguments;if(0===n.length?e._sounds.length&&(u=e._sounds[0]._id):1===n.length?e._getSoundIds().indexOf(n[0])>=0?u=parseInt(n[0],10):e._sounds.length&&(u=e._sounds[0]._id,o=parseFloat(n[0])):2===n.length&&(o=parseFloat(n[0]),u=parseInt(n[1],10)),typeof u>"u")return 0;if("number"==typeof o&&("loaded"!==e._state||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}}),e;var c=e._soundById(u);if(c){if(!("number"==typeof o&&o>=0)){if(e._webAudio){var k=e.playing(u)?t.ctx.currentTime-c._playStart:0;return c._seek+((c._rateSeek?c._rateSeek-c._seek:0)+k*Math.abs(c._rate))}return c._node.currentTime}var m=e.playing(u);m&&e.pause(u,!0),c._seek=o,c._ended=!1,e._clearTimer(u),!e._webAudio&&c._node&&!isNaN(c._node.duration)&&(c._node.currentTime=o);var y=function(){m&&e.play(u,!0),e._emit("seek",u)};if(m&&!e._webAudio){var A=function(){e._playLock?setTimeout(A,0):y()};setTimeout(A,0)}else y()}return e},playing:function(e){var n=this;if("number"==typeof e){var o=n._soundById(e);return!!o&&!o._paused}for(var u=0;u<n._sounds.length;u++)if(!n._sounds[u]._paused)return!0;return!1},duration:function(e){var n=this,o=n._duration,u=n._soundById(e);return u&&(o=n._sprite[u._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,o=0;o<n.length;o++)n[o]._paused||e.stop(n[o]._id),e._webAudio||(e._clearSound(n[o]._node),n[o]._node.removeEventListener("error",n[o]._errorFn,!1),n[o]._node.removeEventListener(t._canPlayEvent,n[o]._loadFn,!1),n[o]._node.removeEventListener("ended",n[o]._endFn,!1),t._releaseHtml5Audio(n[o]._node)),delete n[o]._node,e._clearTimer(n[o]._id);var u=t._howls.indexOf(e);u>=0&&t._howls.splice(u,1);var d=!0;for(o=0;o<t._howls.length;o++)if(t._howls[o]._src===e._src||e._src.indexOf(t._howls[o]._src)>=0){d=!1;break}return f&&d&&delete f[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,o,u){return"function"==typeof n&&this["_on"+e].push(u?{id:o,fn:n,once:u}:{id:o,fn:n}),this},off:function(e,n,o){var u=this,d=u["_on"+e],h=0;if("number"==typeof n&&(o=n,n=null),n||o)for(h=0;h<d.length;h++){var c=o===d[h].id;if(n===d[h].fn&&c||!n&&c){d.splice(h,1);break}}else if(e)u["_on"+e]=[];else{var m=Object.keys(u);for(h=0;h<m.length;h++)0===m[h].indexOf("_on")&&Array.isArray(u[m[h]])&&(u[m[h]]=[])}return u},once:function(e,n,o){return this.on(e,n,o,1),this},_emit:function(e,n,o){for(var u=this,d=u["_on"+e],h=d.length-1;h>=0;h--)(!d[h].id||d[h].id===n||"load"===e)&&(setTimeout(function(c){c.call(this,n,o)}.bind(u,d[h].fn),0),d[h].once&&u.off(e,d[h].fn,d[h].id));return u._loadQueue(e),u},_loadQueue:function(e){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===e&&(n._queue.shift(),n._loadQueue()),e||o.action()}return n},_ended:function(e){var n=this,o=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var u=!(!e._loop&&!n._sprite[o][2]);if(n._emit("end",e._id),!n._webAudio&&u&&n.stop(e._id,!0).play(e._id),n._webAudio&&u){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var d=1e3*(e._stop-e._start)/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),d)}return n._webAudio&&!u&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),t._autoSuspend()),!n._webAudio&&!u&&n.stop(e._id,!0),n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if("function"!=typeof n._endTimers[e])clearTimeout(n._endTimers[e]);else{var o=n._soundById(e);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,o=0;o<n._sounds.length;o++)if(e===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new s(e)},_drain:function(){var e=this,n=e._pool,o=0,u=0;if(!(e._sounds.length<n)){for(u=0;u<e._sounds.length;u++)e._sounds[u]._ended&&o++;for(u=e._sounds.length-1;u>=0;u--){if(o<=n)return;e._sounds[u]._ended&&(e._webAudio&&e._sounds[u]._node&&e._sounds[u]._node.disconnect(0),e._sounds.splice(u,1),o--)}}},_getSoundIds:function(e){if(typeof e>"u"){for(var o=[],u=0;u<this._sounds.length;u++)o.push(this._sounds[u]._id);return o}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=f[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),this},_cleanBuffer:function(e){var o=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),o))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,o=t._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(o,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=!0===n._preload?"auto":n._preload,e._node.volume=o*t.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,n=e._parent;n._duration===1/0&&(n._duration=Math.ceil(10*e._node.duration)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=1e3*n._duration),n._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var f={},p=function(e){var n=e._src;if(f[n])return e._duration=f[n].duration,void g(e);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),u=new Uint8Array(o.length),d=0;d<o.length;++d)u[d]=o.charCodeAt(d);b(u.buffer,e)}else{var h=new XMLHttpRequest;h.open(e._xhr.method,n,!0),h.withCredentials=e._xhr.withCredentials,h.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(c){h.setRequestHeader(c,e._xhr.headers[c])}),h.onload=function(){var c=(h.status+"")[0];"0"===c||"2"===c||"3"===c?b(h.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".")},h.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete f[n],e.load())},v(h)}},v=function(e){try{e.send()}catch{e.onerror()}},b=function(e,n){var o=function(){n._emit("loaderror",null,"Decoding audio data failed.")},u=function(d){d&&n._sounds.length>0?(f[n._src]=d,g(n,d)):o()};typeof Promise<"u"&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(u).catch(o):t.ctx.decodeAudioData(e,u,o)},g=function(e,n){n&&!e._duration&&(e._duration=n.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},x=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(e&&o&&o<9){var u=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!u&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=l,typeof L<"u"?(L.HowlerGlobal=a,L.Howler=t,L.Howl=l,L.Sound=s):typeof window<"u"&&(window.HowlerGlobal=a,window.Howler=t,window.Howl=l,window.Sound=s)}(),function(){var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var l=this;if(!l.ctx||!l.ctx.listener)return l;for(var s=l._howls.length-1;s>=0;s--)l._howls[s].stereo(t);return l},HowlerGlobal.prototype.pos=function(t,l,s){var f=this;return f.ctx&&f.ctx.listener?"number"!=typeof t?f._pos:(f._pos=[t,l="number"!=typeof l?f._pos[1]:l,s="number"!=typeof s?f._pos[2]:s],typeof f.ctx.listener.positionX<"u"?(f.ctx.listener.positionX.setTargetAtTime(f._pos[0],Howler.ctx.currentTime,.1),f.ctx.listener.positionY.setTargetAtTime(f._pos[1],Howler.ctx.currentTime,.1),f.ctx.listener.positionZ.setTargetAtTime(f._pos[2],Howler.ctx.currentTime,.1)):f.ctx.listener.setPosition(f._pos[0],f._pos[1],f._pos[2]),f):f},HowlerGlobal.prototype.orientation=function(t,l,s,f,p,v){var b=this;if(!b.ctx||!b.ctx.listener)return b;var g=b._orientation;return"number"!=typeof t?g:(b._orientation=[t,l="number"!=typeof l?g[1]:l,s="number"!=typeof s?g[2]:s,f="number"!=typeof f?g[3]:f,p="number"!=typeof p?g[4]:p,v="number"!=typeof v?g[5]:v],typeof b.ctx.listener.forwardX<"u"?(b.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),b.ctx.listener.forwardY.setTargetAtTime(l,Howler.ctx.currentTime,.1),b.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),b.ctx.listener.upX.setTargetAtTime(f,Howler.ctx.currentTime,.1),b.ctx.listener.upY.setTargetAtTime(p,Howler.ctx.currentTime,.1),b.ctx.listener.upZ.setTargetAtTime(v,Howler.ctx.currentTime,.1)):b.ctx.listener.setOrientation(t,l,s,f,p,v),b)},Howl.prototype.init=(t=Howl.prototype.init,function(l){var s=this;return s._orientation=l.orientation||[1,0,0],s._stereo=l.stereo||null,s._pos=l.pos||null,s._pannerAttr={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:360,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:360,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:0,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:"inverse",maxDistance:typeof l.maxDistance<"u"?l.maxDistance:1e4,panningModel:typeof l.panningModel<"u"?l.panningModel:"HRTF",refDistance:typeof l.refDistance<"u"?l.refDistance:1,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:1},s._onstereo=l.onstereo?[{fn:l.onstereo}]:[],s._onpos=l.onpos?[{fn:l.onpos}]:[],s._onorientation=l.onorientation?[{fn:l.onorientation}]:[],t.call(this,l)}),Howl.prototype.stereo=function(t,l){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"stereo",action:function(){s.stereo(t,l)}}),s;var f=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof l>"u"){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0]}for(var p=s._getSoundIds(l),v=0;v<p.length;v++){var b=s._soundById(p[v]);if(b){if("number"!=typeof t)return b._stereo;b._stereo=t,b._pos=[t,0,0],b._node&&(b._pannerAttr.panningModel="equalpower",(!b._panner||!b._panner.pan)&&a(b,f),"spatial"===f?typeof b._panner.positionX<"u"?(b._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),b._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),b._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):b._panner.setPosition(t,0,0):b._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",b._id)}}return s},Howl.prototype.pos=function(t,l,s,f){var p=this;if(!p._webAudio)return p;if("loaded"!==p._state)return p._queue.push({event:"pos",action:function(){p.pos(t,l,s,f)}}),p;if(l="number"!=typeof l?0:l,s="number"!=typeof s?-.5:s,typeof f>"u"){if("number"!=typeof t)return p._pos;p._pos=[t,l,s]}for(var v=p._getSoundIds(f),b=0;b<v.length;b++){var g=p._soundById(v[b]);if(g){if("number"!=typeof t)return g._pos;g._pos=[t,l,s],g._node&&((!g._panner||g._panner.pan)&&a(g,"spatial"),typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(l,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):g._panner.setPosition(t,l,s)),p._emit("pos",g._id)}}return p},Howl.prototype.orientation=function(t,l,s,f){var p=this;if(!p._webAudio)return p;if("loaded"!==p._state)return p._queue.push({event:"orientation",action:function(){p.orientation(t,l,s,f)}}),p;if(l="number"!=typeof l?p._orientation[1]:l,s="number"!=typeof s?p._orientation[2]:s,typeof f>"u"){if("number"!=typeof t)return p._orientation;p._orientation=[t,l,s]}for(var v=p._getSoundIds(f),b=0;b<v.length;b++){var g=p._soundById(v[b]);if(g){if("number"!=typeof t)return g._orientation;g._orientation=[t,l,s],g._node&&(g._panner||(g._pos||(g._pos=p._pos||[0,0,-.5]),a(g,"spatial")),typeof g._panner.orientationX<"u"?(g._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(l,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):g._panner.setOrientation(t,l,s)),p._emit("orientation",g._id)}}return p},Howl.prototype.pannerAttr=function(){var s,f,p,t=this,l=arguments;if(!t._webAudio)return t;if(0===l.length)return t._pannerAttr;if(1===l.length){if("object"!=typeof l[0])return(p=t._soundById(parseInt(l[0],10)))?p._pannerAttr:t._pannerAttr;s=l[0],typeof f>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),t._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:t._panningModel})}else 2===l.length&&(s=l[0],f=parseInt(l[1],10));for(var v=t._getSoundIds(f),b=0;b<v.length;b++)if(p=t._soundById(v[b])){var g=p._pannerAttr;g={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:g.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:g.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:g.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:g.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:g.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:g.panningModel};var x=p._panner;x?(x.coneInnerAngle=g.coneInnerAngle,x.coneOuterAngle=g.coneOuterAngle,x.coneOuterGain=g.coneOuterGain,x.distanceModel=g.distanceModel,x.maxDistance=g.maxDistance,x.refDistance=g.refDistance,x.rolloffFactor=g.rolloffFactor,x.panningModel=g.panningModel):(p._pos||(p._pos=t._pos||[0,0,-.5]),a(p,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var l=this,s=l._parent;l._orientation=s._orientation,l._stereo=s._stereo,l._pos=s._pos,l._pannerAttr=s._pannerAttr,t.call(this),l._stereo?s.stereo(l._stereo):l._pos&&s.pos(l._pos[0],l._pos[1],l._pos[2],l._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var l=this,s=l._parent;return l._orientation=s._orientation,l._stereo=s._stereo,l._pos=s._pos,l._pannerAttr=s._pannerAttr,l._stereo?s.stereo(l._stereo):l._pos?s.pos(l._pos[0],l._pos[1],l._pos[2],l._id):l._panner&&(l._panner.disconnect(0),l._panner=void 0,s._refreshBuffer(l)),t.call(this)}}(Sound.prototype.reset);var a=function(t,l){"spatial"===(l=l||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()});function T(i){return"function"==typeof i}function J(i){const a=i(t=>{Error.call(t),t.stack=(new Error).stack});return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}const q=J(i=>function(a){i(this),this.message=a?`${a.length} errors occurred during unsubscription:\n${a.map((t,l)=>`${l+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=a});function G(i,r){if(i){const a=i.indexOf(r);0<=a&&i.splice(a,1)}}class S{constructor(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let r;if(!this.closed){this.closed=!0;const{_parentage:a}=this;if(a)if(this._parentage=null,Array.isArray(a))for(const s of a)s.remove(this);else a.remove(this);const{initialTeardown:t}=this;if(T(t))try{t()}catch(s){r=s instanceof q?s.errors:[s]}const{_finalizers:l}=this;if(l){this._finalizers=null;for(const s of l)try{ne(s)}catch(f){r=r??[],f instanceof q?r=[...r,...f.errors]:r.push(f)}}if(r)throw new q(r)}}add(r){var a;if(r&&r!==this)if(this.closed)ne(r);else{if(r instanceof S){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=null!==(a=this._finalizers)&&void 0!==a?a:[]).push(r)}}_hasParent(r){const{_parentage:a}=this;return a===r||Array.isArray(a)&&a.includes(r)}_addParent(r){const{_parentage:a}=this;this._parentage=Array.isArray(a)?(a.push(r),a):a?[a,r]:r}_removeParent(r){const{_parentage:a}=this;a===r?this._parentage=null:Array.isArray(a)&&G(a,r)}remove(r){const{_finalizers:a}=this;a&&G(a,r),r instanceof S&&r._removeParent(this)}}S.EMPTY=(()=>{const i=new S;return i.closed=!0,i})();const ee=S.EMPTY;function te(i){return i instanceof S||i&&"closed"in i&&T(i.remove)&&T(i.add)&&T(i.unsubscribe)}function ne(i){T(i)?i():i.unsubscribe()}const R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},D={setTimeout(i,r,...a){const{delegate:t}=D;return t?.setTimeout?t.setTimeout(i,r,...a):setTimeout(i,r,...a)},clearTimeout(i){const{delegate:r}=D;return(r?.clearTimeout||clearTimeout)(i)},delegate:void 0};function re(){}const ye=V("C",void 0,void 0);function V(i,r,a){return{kind:i,value:r,error:a}}function B(i){i()}class W extends S{constructor(r){super(),this.isStopped=!1,r?(this.destination=r,te(r)&&r.add(this)):this.destination=ke}static create(r,a,t){return new $(r,a,t)}next(r){this.isStopped?j(function Ae(i){return V("N",i,void 0)}(r),this):this._next(r)}error(r){this.isStopped?j(function we(i){return V("E",void 0,i)}(r),this):(this.isStopped=!0,this._error(r))}complete(){this.isStopped?j(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(r){this.destination.next(r)}_error(r){try{this.destination.error(r)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xe=Function.prototype.bind;function N(i,r){return xe.call(i,r)}class Te{constructor(r){this.partialObserver=r}next(r){const{partialObserver:a}=this;if(a.next)try{a.next(r)}catch(t){M(t)}}error(r){const{partialObserver:a}=this;if(a.error)try{a.error(r)}catch(t){M(t)}else M(r)}complete(){const{partialObserver:r}=this;if(r.complete)try{r.complete()}catch(a){M(a)}}}class $ extends W{constructor(r,a,t){let l;if(super(),T(r)||!r)l={next:r??void 0,error:a??void 0,complete:t??void 0};else{let s;this&&R.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=()=>this.unsubscribe(),l={next:r.next&&N(r.next,s),error:r.error&&N(r.error,s),complete:r.complete&&N(r.complete,s)}):l=r}this.destination=new Te(l)}}function M(i){!function ve(i){D.setTimeout(()=>{const{onUnhandledError:r}=R;if(!r)throw i;r(i)})}(i)}function j(i,r){const{onStoppedNotification:a}=R;a&&D.setTimeout(()=>a(i,r))}const ke={closed:!0,next:re,error:function Se(i){throw i},complete:re},Ie="function"==typeof Symbol&&Symbol.observable||"@@observable";function ie(i){return i}let ae=(()=>{class i{constructor(a){a&&(this._subscribe=a)}lift(a){const t=new i;return t.source=this,t.operator=a,t}subscribe(a,t,l){const s=function Pe(i){return i&&i instanceof W||function Oe(i){return i&&T(i.next)&&T(i.error)&&T(i.complete)}(i)&&te(i)}(a)?a:new $(a,t,l);return B(()=>{const{operator:f,source:p}=this;s.add(f?f.call(s,p):p?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(a){try{return this._subscribe(a)}catch(t){a.error(t)}}forEach(a,t){return new(t=oe(t))((l,s)=>{const f=new $({next:p=>{try{a(p)}catch(v){s(v),f.unsubscribe()}},error:s,complete:l});this.subscribe(f)})}_subscribe(a){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(a)}[Ie](){return this}pipe(...a){return function Ee(i){return 0===i.length?ie:1===i.length?i[0]:function(a){return i.reduce((t,l)=>l(t),a)}}(a)(this)}toPromise(a){return new(a=oe(a))((t,l)=>{let s;this.subscribe(f=>s=f,f=>l(f),()=>t(s))})}}return i.create=r=>new i(r),i})();function oe(i){var r;return null!==(r=i??R.Promise)&&void 0!==r?r:Promise}class Fe extends W{constructor(r,a,t,l,s,f){super(r),this.onFinalize=s,this.shouldUnsubscribe=f,this._next=a?function(p){try{a(p)}catch(v){r.error(v)}}:super._next,this._error=l?function(p){try{l(p)}catch(v){r.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(p){r.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:a}=this;super.unsubscribe(),!a&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}}}const Ce=J(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let U=(()=>{class i extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(a){const t=new se(this,this);return t.operator=a,t}_throwIfClosed(){if(this.closed)throw new Ce}next(a){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const t of this.currentObservers)t.next(a)}})}error(a){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=a;const{observers:t}=this;for(;t.length;)t.shift().error(a)}})}complete(){B(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:a}=this;for(;a.length;)a.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var a;return(null===(a=this.observers)||void 0===a?void 0:a.length)>0}_trySubscribe(a){return this._throwIfClosed(),super._trySubscribe(a)}_subscribe(a){return this._throwIfClosed(),this._checkFinalizedStatuses(a),this._innerSubscribe(a)}_innerSubscribe(a){const{hasError:t,isStopped:l,observers:s}=this;return t||l?ee:(this.currentObservers=null,s.push(a),new S(()=>{this.currentObservers=null,G(s,a)}))}_checkFinalizedStatuses(a){const{hasError:t,thrownError:l,isStopped:s}=this;t?a.error(l):s&&a.complete()}asObservable(){const a=new ae;return a.source=this,a}}return i.create=(r,a)=>new se(r,a),i})();class se extends U{constructor(r,a){super(),this.destination=r,this.source=a}next(r){var a,t;null===(t=null===(a=this.destination)||void 0===a?void 0:a.next)||void 0===t||t.call(a,r)}error(r){var a,t;null===(t=null===(a=this.destination)||void 0===a?void 0:a.error)||void 0===t||t.call(a,r)}complete(){var r,a;null===(a=null===(r=this.destination)||void 0===r?void 0:r.complete)||void 0===a||a.call(r)}_subscribe(r){var a,t;return null!==(t=null===(a=this.source)||void 0===a?void 0:a.subscribe(r))&&void 0!==t?t:ee}}function Re(i,r=ie){return i=i??De,function be(i){return r=>{if(function me(i){return T(i?.lift)}(r))return r.lift(function(a){try{return i(a,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}((a,t)=>{let l,s=!0;a.subscribe(function Le(i,r,a,t,l){return new Fe(i,r,a,t,l)}(t,f=>{const p=r(f);(s||!i(l,p))&&(s=!1,l=p,t.next(f))}))})}function De(i,r){return i===r}class Be extends U{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const a=super._subscribe(r);return!a.closed&&r.next(this._value),a}getValue(){const{hasError:r,thrownError:a,_value:t}=this;if(r)throw a;return this._throwIfClosed(),t}next(r){super.next(this._value=r)}}function Y(){return(Y=(0,I.Z)(function*(i){let r=yield fetch(i);if(!r.ok)return console.log(`fetch(${i}) failed with status ${r.status}`),null;let a=yield r.text();return le((new DOMParser).parseFromString(a,"text/xml"))})).apply(this,arguments)}function le(i){return Array.from(i.querySelectorAll("div[type=page]")).map(a=>{let t=a.querySelector("graphic[url]"),l=a.querySelectorAll("p"),s={id:a.getAttribute("id"),paragraphs:Array.from(l)};return null!==t&&(s.img=t.getAttribute("url")),a.attributes&&(s.attributes=a.attributes),s})}var ue=function(i){var r=this;r.sounds=[],r._sprite=i.sprite,r._reading$=new U,r._tinySprite=Object.keys(i.sprite).map(a=>[r._sprite[a][0],a,r._sprite[a][0]+r._sprite[a][1]]),r._tinySprite.pop(),r._percentPlayed=new Be("0%"),r.sound=new K.Howl({src:i.src,sprite:i.sprite,rate:i.rate}),requestAnimationFrame(r.step.bind(r))};function qe(i){return X.apply(this,arguments)}function X(){return(X=(0,I.Z)(function*(i){return new Promise(function(r,a){let t=new XMLHttpRequest;t.open("HEAD",i),t.onload=function(){r(this.status>=200&&this.status<300)},t.onerror=function(){r(!1)},t.send()})})).apply(this,arguments)}ue.prototype={play:function(i){var r=this;return r._spriteLeft=r._tinySprite,r.sound.play(i)},pause:function(){return this.sound.pause(),this.sound.id},goBack:function(i,r){var a=this;if(a._spriteLeft=a._tinySprite,a.sound.seek(i)-r>0){i=a.sound.seek(a.sound.seek(i)-r,i);for(var t=a.sound.seek(i),l=0;l<a._spriteLeft.length;l++)1e3*t>=a._spriteLeft[l][0]&&(1e3*t<=a._spriteLeft[l][2]&&a._reading$.next(a._spriteLeft[l][1]),a._spriteLeft=a._spriteLeft.slice(l,a._spriteLeft.length))}else i=a.sound.seek(0,i),a._reading$.next(a._spriteLeft[0][1]);return i},goTo:function(t,r){var a=this;a._spriteLeft=a._tinySprite,t=a.sound.seek(r,t);for(var l=a.sound.seek(t),s=0;s<a._spriteLeft.length;s++)1e3*l>=a._spriteLeft[s][0]&&(1e3*l<=a._spriteLeft[s][2]&&a._reading$.next(a._spriteLeft[s][1]),a._spriteLeft=a._spriteLeft.slice(s,a._spriteLeft.length));return t},stop:function(){return this._reading$.next(""),this.sound.stop()},step:function(){for(var i=this,r=0;r<i.sounds.length;r++){for(var a=i.sound.seek()||0,t=0;t<i._spriteLeft.length;t++)a>0&&1e3*a>=i._spriteLeft[t][0]&&(1e3*a<=i._spriteLeft[t][2]&&i._reading$.next(i._spriteLeft[t][1]),i._spriteLeft=i._spriteLeft.slice(t,i._spriteLeft.length));let l=(a/i.sound.duration()*100||0)+"%";i.sounds[r].style.width=l,i.sounds[r].setAttribute("offset",l)}requestAnimationFrame(i.step.bind(i))}};const Ge={page:"Page",speed:"Playback Speed","re-align":"Re-align with audio","loading-error":'Error: the <FILETYPE> file "<FILENAME>" could not be loaded.',"parse-error":'Error: the <FILETYPE> file "<FILENAME>" could not be parsed.',"alignment-error":"Error: No alignments were found.",loading:"Loading...","line-placeholder":"Type your text here","upload-image":"Upload an image for this page","choose-file":"Choose a file","play-tooltip":"Play/pause audio recording","rewind-tooltip":"Rewind 5 seconds","stop-tooltip":"Stop audio playback","theme-tooltip":"Change theme","full-screen-tooltip":"Full screen mode","translation-tooltip":"Toggle translations","add-translation":"Add a translation, transliteration or gloss"},Ve={page:"Page",speed:"Vitesse de Lecture","re-align":"R\xe9aligner avec l'audio","loading-error":'Erreur: le fichier <FILETYPE> "<FILENAME>" n\'a pas pu \xeatre charg\xe9.',"parse-error":'Erreur: le fichier <FILETYPE> "<FILENAME>" n\'a pas pu \xeatre analys\xe9.',"alignment-error":"Erreur: aucun alignement n'a \xe9t\xe9 trouv\xe9.",loading:"Chargement en cours","line-placeholder":"\xc9crivez votre texte ici","upload-image":"T\xe9l\xe9verser charger une image pour cette page","choose-file":"Choisir un fichier","play-tooltip":"\xc9couter/mettre en pause l'enregistrement","rewind-tooltip":"Reculer de 5 secondes","stop-tooltip":"Arr\xeater la lecture","theme-tooltip":"Changer de th\xeame visuel","full-screen-tooltip":"Mode plein \xe9cran","translation-tooltip":"Afficher ou cacher les traductions","add-translation":"Ajouter une traduction, une translit\xe9ration ou une glose"},We={page:"P\xe1gina",speed:"Velocidad de reproducci\xf3n","re-align":"Re-alinear con el audio","loading-error":'Error: el fichero <FILETYPE> "<FILENAME>" no se pudo cargar.',"parse-error":'Error: el fichero <FILETYPE> "<FILENAME>" no se pudo analizar.',"alignment-error":"Error: No se encontr\xf3 ning\xfan alineamiento.",loading:"Cargando...","line-placeholder":"Escriba su texto aqu\xed","upload-image":"Cargue una imagen para esta p\xe1gina","choose-file":"Seleccione un fichero","play-tooltip":"Reproducir/pausar grabaci\xf3n de audio","rewind-tooltip":"Rebobine (rewind) 5 segundos","stop-tooltip":"Pare la reproducci\xf3n de audio","theme-tooltip":"Cambie la paleta de colores","full-screen-tooltip":"Modo pantalla completa","translation-tooltip":"Active o desactive las traducciones","add-translation":"A\xf1ada una traducci\xf3n, transliteraci\xf3n o glosa"},E=class{constructor(i){(0,_.r)(this,i),this.i18nStrings={eng:Ge,fra:Ve,spa:We},this.playback_rate=1,this.showGuide=!1,this.hasTextTranslations=!1,this.assetsStatus={AUDIO:0,RAS:0},this.alignment_failed=!1,this.isScrolling=!1,this.scrollTimer=null,this.endOfPageTags={},this.Guide=()=>(0,_.h)("button",{class:"scroll-guide__container ripple ui-button theme--"+this.theme,onClick:()=>this.hideGuideAndScroll()},(0,_.h)("span",{class:"scroll-guide__text theme--"+this.theme},this.getI18nString("re-align"))),this.Overlay=()=>(0,_.h)("object",{onClick:r=>this.goToSeekFromProgress(r),id:"overlay__object",type:"image/svg+xml",data:this.svgOverlay}),this.RemoveImg=r=>(0,_.h)("button",{"data-cy":"delete-button","aria-label":"Delete",title:"Delete image",onClick:()=>this.deleteImage(r.pageIndex),id:"img-remover",class:"ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"delete")),this.Img=r=>(0,_.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,_.h)("img",{alt:"image",class:"image",src:r.imgURL})),this.ImgPlaceHolder=r=>(0,_.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,_.h)("div",{class:"drop-area"},(0,_.h)("form",{class:"my-form"},(0,_.h)("p",{class:"theme--"+this.theme},this.getI18nString("upload-image")),(0,_.h)("input",{type:"file",class:"fileElem",id:"fileElem--"+r.pageID,accept:"image/*",onChange:a=>this.handleFiles(a.target.files[0],r.pageIndex)}),(0,_.h)("label",{class:"button",htmlFor:"fileElem--"+r.pageID},this.getI18nString("choose-file"))))),this.PageCount=r=>(0,_.h)("div",{class:"page__counter color--"+this.theme},this.getI18nString("page")," ",(0,_.h)("span",{"data-cy":"page-count__current"},r.currentPage)," / ",(0,_.h)("span",{"data-cy":"page-count__total"},r.pgCount)),this.ImgContainer=r=>(0,_.h)("div",{class:"image__container"},(0,_.h)("span",{id:"image-container"},"EDIT"===this.mode&&r.pageIndex in this.images&&null!==this.images[r.pageIndex]?(0,_.h)(this.RemoveImg,{pageIndex:r.pageIndex}):null,r.pageIndex in this.images&&null!==this.images[r.pageIndex]?(0,_.h)(this.Img,{imgURL:this.images[r.pageIndex]}):null),"EDIT"!==this.mode||r.pageIndex in this.images&&null!==this.images[r.pageIndex]?null:(0,_.h)(this.ImgPlaceHolder,{pageID:r.pageID,pageIndex:r.pageIndex})),this.Page=r=>(0,_.h)("div",{class:"page page__container page--multi animate-transition  theme--"+this.theme+" "+(r.pageData.attributes.class?r.pageData.attributes.class.value:""),id:r.pageData.id},this.parsed_text.length>1?(0,_.h)(this.PageCount,{pgCount:this.parsed_text.length,currentPage:this.parsed_text.indexOf(r.pageData)+1}):null,(0,_.h)(this.ImgContainer,{pageID:r.pageData.id,pageIndex:this.parsed_text.indexOf(r.pageData)}),(0,_.h)("div",{class:"page__col__text paragraph__container theme--"+this.theme},r.pageData.paragraphs.map(a=>(0,_.h)(this.Paragraph,{sentences:Array.from(a.childNodes),attributes:a.attributes})))),this.Paragraph=r=>(0,_.h)("div",{class:"paragraph sentence__container theme--"+this.theme+" "+(r.attributes.class?r.attributes.class.value:"")},r.sentences.map(a=>a.childNodes.length>0&&(0,_.h)(this.Sentence,{sentenceData:a}))),this.Sentence=r=>{let a=Array.from(r.sentenceData.childNodes),t=r.sentenceData.id;!this.hasTextTranslations&&r.sentenceData.hasAttribute("class")&&(this.hasTextTranslations=/translation/.test(r.sentenceData.getAttribute("class")));let l={};return r.sentenceData.hasAttribute("xml:lang")&&(l.lang=r.sentenceData.getAttribute("xml:lang")),r.sentenceData.hasAttribute("lang")&&(l.lang=r.sentenceData.getAttribute("lang")),(0,_.h)("div",Object.assign({},l,{class:"sentence "+(r.sentenceData.hasAttribute("class")?r.sentenceData.getAttribute("class"):"")}),a.map((s,f)=>{if("#text"===s.nodeName)return(0,_.h)(this.NonWordText,{text:s.textContent,attributes:s.attributes,id:(r.sentenceData.hasAttribute("id")?r.sentenceData.getAttribute("id"):"P")+"text"+f});if("w"===s.nodeName||"W"===s.nodeName)return(0,_.h)(this.Word,{text:s.textContent,id:s.id,attributes:s.attributes});if(s){let p={};return s.hasAttribute("xml:lang")&&(p.lang=r.sentenceData.getAttribute("xml:lang")),s.hasAttribute("lang")&&(p.lang=r.sentenceData.getAttribute("lang")),(0,_.h)("span",Object.assign({},p,{class:"sentence__text theme--"+this.theme+" "+s.className,id:s.id?s.id:"text_"+f}),s.textContent)}}),(()=>"EDIT"!==this.mode||/translation/.test(r.sentenceData.getAttribute("class"))?null:t in this.translations&&t in this.translations&&null!==this.translations[t]?(0,_.h)("span",{class:"sentence__translation"},(0,_.h)("button",{title:"Remove translation","aria-label":"Remove translation","data-cy":"remove-translation-button",onClick:()=>this.removeLine(r.sentenceData),class:"sentence__translation__button remove"},(0,_.h)("i",{class:"material-icons"},"remove")),(0,_.h)("p",{id:t+"translation","data-cy":"translation-line",class:"sentence__text editable__translation",onInput:s=>{this.updateTranslation(t,s.currentTarget.innerText)},contentEditable:!0,onKeyDown:s=>{"Enter"==s.key&&s.preventDefault()},"data-placeholder":this.getI18nString("line-placeholder")})):(0,_.h)("button",{title:this.getI18nString("add-translation"),"aria-label":"Add translation","data-cy":"add-translation-button",class:"sentence__translation sentence__translation__button",onClick:()=>this.addLine(r.sentenceData)},(0,_.h)("i",{class:"material-icons"},"add")))())},this.NonWordText=r=>{let a={};return r.attributes&&r.attributes["xml:lang"]&&(a.lang=r.attributes["xml:lang"].value),r.attributes&&r.attributes.lang&&(a.lang=r.attributes.lang.value),(0,_.h)("span",Object.assign({},a,{class:"sentence__text theme--"+this.theme,id:r.id}),r.text)},this.Word=r=>{let a={};return r.attributes&&r.attributes["xml:lang"]&&(a.lang=r.attributes["xml:lang"].value),r.attributes&&r.attributes.lang&&(a.lang=r.attributes.lang.value),(0,_.h)("span",Object.assign({},a,{class:"sentence__word theme--"+this.theme+" "+(r&&r.attributes.class?r.attributes.class.value:""),id:r.id,onClick:t=>this.playSprite(t)}),r.text)},this.PlayControl=()=>(0,_.h)("button",{"data-cy":"play-button",disabled:this.hasLoaded<2,"aria-label":"Play",title:this.getI18nString("play-tooltip"),onClick:()=>{this.playing?this.pause():this.play()},class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},this.playing?"pause":"play_arrow")),this.ReplayControl=()=>(0,_.h)("button",{"data-cy":"replay-button",disabled:this.hasLoaded<2,"aria-label":"Rewind",title:this.getI18nString("rewind-tooltip"),onClick:()=>this.goBack(5),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"replay_5")),this.StopControl=()=>(0,_.h)("button",{"data-cy":"stop-button",disabled:this.hasLoaded<2,"aria-label":"Stop",title:this.getI18nString("stop-tooltip"),onClick:()=>this.stop(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"stop")),this.PlaybackSpeedControl=()=>(0,_.h)("div",null,(0,_.h)("h5",{class:"control-panel__buttons__header color--"+this.theme,id:"speed-slider-label"},this.getI18nString("speed")),(0,_.h)("input",{type:"range",min:100-this.playbackRateRange,max:100+this.playbackRateRange,value:100*this.playback_rate,class:"slider control-panel__control",id:"myRange","aria-labelledby":"speed-slider-label",onInput:r=>{console.log("v",r),this.changePlayback(r)}})),this.StyleControl=()=>(0,_.h)("button",{"aria-label":"Change theme",onClick:()=>this.changeTheme(),title:this.getI18nString("theme-tooltip"),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons-outlined"},"style")),this.FullScreenControl=()=>(0,_.h)("button",{"aria-label":"Full screen mode",onClick:()=>this.toggleFullscreen(),title:this.getI18nString("full-screen-tooltip"),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons","aria-label":"Full screen mode"},this.fullscreen?"fullscreen_exit":"fullscreen")),this.TextTranslationDisplayControl=()=>(0,_.h)("button",{"data-cy":"translation-toggle","aria-label":"Toggle Translation",title:this.getI18nString("translation-tooltip"),onClick:()=>this.toggleTextTranslation(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons-outlined"},"subtitles")),this.ErrorMessage=r=>(0,_.h)("p",{"data-cy":r.data_cy,class:"alert status-error"},(0,_.h)("span",{class:"material-icons"},"error_outline")," ",r.msg),this.ControlPanel=()=>(0,_.h)("div",{"data-cy":"control-panel",class:"control-panel theme--"+this.theme+" background--"+this.theme},(0,_.h)("div",{class:"control-panel__buttons--left"},(0,_.h)(this.PlayControl,null),(0,_.h)(this.ReplayControl,null),(0,_.h)(this.StopControl,null)),(0,_.h)("div",{class:"control-panel__buttons--center"},(0,_.h)(this.PlaybackSpeedControl,null)),(0,_.h)("div",{class:"control-panel__buttons--right"},this.hasTextTranslations&&(0,_.h)(this.TextTranslationDisplayControl,null),(0,_.h)(this.StyleControl,null),(0,_.h)(this.FullScreenControl,null))),this.href=void 0,this.audio=void 0,this.svgOverlay=void 0,this.theme="light",this.language="eng",this.cssUrl=void 0,this.useAssetsFolder=void 0,this.imageAssetsFolder="assets/",this.pageScrolling="horizontal",this.mode="VIEW",this.scrollBehaviour="smooth",this.displayTranslation=!0,this.playbackRateRange=15,this.autoPauseAtEndOfPage=!1,this.playing=!1,this.fullscreen=!1,this.autoScroll=!0,this.hasLoaded=0,this.images=void 0,this.translations=void 0}handleScrollEvent(){this.isScrolling=!0,this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{this.isScrolling=!1},125)}wheelHandler(i){if(this.el.shadowRoot.querySelector(".reading")&&(i.path[0].classList.contains("sentence__word")||i.path[0].classList.contains("sentence__container")||i.path[0].classList.contains("sentence"))&&this.autoScroll){let r=this.el.shadowRoot.querySelector(".reading");r&&(this.autoScroll=!this.inPageContentOverflow(r),this.showGuide=!this.autoScroll)}}urlTransform(i){return void 0!==this.useAssetsFolder?this.useAssetsFolder&&r(i)&&!i.startsWith("blob")?"assets/"+i:i:this.imageAssetsFolder&&r(i)&&!i.startsWith("blob")?(this.imageAssetsFolder&&!this.imageAssetsFolder.endsWith("/")&&(this.imageAssetsFolder+="/"),this.imageAssetsFolder+i):i;function r(a){return!/^(https?:[/][/]|assets[/]|data:)/.test(a)}}buildSprite(i,r){return new ue({src:[i],sprite:r,rate:this.playback_rate})}tagToQuery(i){return"#"+(i=i.replace(".","\\.")).replace("#","\\#")}returnWordClosestTo(i){let r=Object.keys(this.processed_alignment);r.pop();for(let a=1;a<r.length;a++)if(1e3*i>this.processed_alignment[r[a]][0]&&this.processed_alignment[r[a+1]]&&1e3*i<this.processed_alignment[r[a+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(r[a]))}getPathFromAssetType(i){return"AUDIO"===i?this.audio:"RAS"===i?this.href:"Asset Path Not Supported"}changePlayback(i){this.playback_rate=parseInt(i.currentTarget.value)/100,this.audio_howl_sprites.sound.rate(this.playback_rate)}goBack(i){this.autoScroll=!1,this.play_id&&this.audio_howl_sprites.goBack(this.play_id,i),setTimeout(()=>this.autoScroll=!0,100)}goTo(i){void 0===this.play_id&&(this.play(),this.pause()),this.autoScroll=!1,this.audio_howl_sprites.goTo(this.play_id,i/=1e3),setTimeout(()=>this.autoScroll=!0,100)}goToSeekAtEl(i){let a=i.currentTarget.id;return this.goTo(this.processed_alignment[a][0]),a}goToSeekFromProgress(i){let a=i.currentTarget.getBoundingClientRect();this.goTo((i.pageX-a.left)/a.width*this.duration*1e3)}pause(){this.playing=!1,this.audio_howl_sprites.pause()}play(){this.playing=!0,this.play_id=this.audio_howl_sprites.play(void 0!==this.play_id?this.play_id:"all"),this.animateProgress()}playSprite(i){let r=this.goToSeekAtEl(i);this.playing||this.audio_howl_sprites.play(r)}stop(){this.playing=!1,this.audio_howl_sprites.stop(),this.el.shadowRoot.querySelectorAll(".reading").forEach(i=>i.classList.remove("reading")),this.autoScroll||(this.autoScroll=!0,this.showGuide=!1)}toggleTextTranslation(){this.el.shadowRoot.querySelectorAll(".translation").forEach(i=>i.classList.toggle("invisible")),this.el.shadowRoot.querySelectorAll(".sentence__translation").forEach(i=>i.classList.toggle("invisible"))}addHighlightingTo(i){this.el.shadowRoot.querySelectorAll(".reading").forEach(r=>r.classList.remove("reading")),i.classList.add("reading")}animateProgressWithOverlay(){let i=this.el.shadowRoot.querySelector("#overlay__object"),r=i.contentDocument.querySelector("#progress-fill"),a=i.contentDocument.querySelector("#progress-trail"),t=i.contentDocument.querySelector("#progress-base");r.classList.add("stop-color--"+this.theme),t.classList.add("stop-color--"+this.theme),this.audio_howl_sprites.sounds.push(r),this.audio_howl_sprites.sounds.push(a),this.audio_howl_sprites.sound.once("end",()=>{this.audio_howl_sprites.sounds.forEach(l=>{l.setAttribute("offset","0%")}),this.el.shadowRoot.querySelectorAll(".reading").forEach(l=>l.classList.remove("reading")),this.playing=!1},this.play_id)}animateProgressDefault(i,r){let a=document.createElement("div");a.className="progress theme--"+this.theme,a.id=i.toString(),a.dataset.sprite=r;let t=this.tagToQuery(r);this.el.shadowRoot.querySelector(t).appendChild(a),this.audio_howl_sprites.sounds.push(a),this.audio_howl_sprites.sound.once("end",()=>{this.el.shadowRoot.querySelectorAll(".reading").forEach(l=>l.classList.remove("reading")),this.playing=!1},this.play_id)}animateProgress(i=this.play_id){this.svgOverlay?this.animateProgressWithOverlay():this.animateProgressDefault(i,"all")}changeFill(){let i=this.el.shadowRoot.querySelector(".sentence__word"),r=window.getComputedStyle(i).color,a=this.el.shadowRoot.querySelector("#overlay__object"),t=a.contentDocument.querySelector("#progress-fill"),l=a.contentDocument.querySelector("#progress-base");a.contentDocument.querySelector("#polygon").setAttribute("stroke",r),l.setAttribute("stop-color",r),t.setAttribute("stop-color",r)}getImages(){var i=this;return(0,I.Z)(function*(){return i.images})()}getTranslations(){var i=this;return(0,I.Z)(function*(){return i.translations})()}changeTheme(){var i=this;return(0,I.Z)(function*(){i.theme="light"===i.theme?"dark":"light"})()}static _getSentenceContainerOfWord(i){return i.parentElement.parentElement.parentElement}toggleFullscreen(){if(this.fullscreen){let i=this.el.ownerDocument;i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.msExitFullscreen&&i.msExitFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.remove("read-along-container--fullscreen")}else{let i=this.el.shadowRoot.getElementById("read-along-container");i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.add("read-along-container--fullscreen")}this.fullscreen=!this.fullscreen}hideGuideAndScroll(){let i=this.el.shadowRoot.querySelector(".reading"),r=new IntersectionObserver(a=>{let[t]=a;t.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),r.unobserve(i))});r.observe(i),this.scrollTo(i)}inParagraphContentOverflow(i){let a=E._getSentenceContainerOfWord(i).getBoundingClientRect(),t=i.getBoundingClientRect(),l=t.right<a.left,s=t.right>a.right,f=new IntersectionObserver(p=>{let[v]=p;v.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),f.unobserve(i))});return f.observe(i),l||s}inPageContentOverflow(i){let a=this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect(),t=i.getBoundingClientRect(),l=t.top+t.height>a.top+a.height,s=t.top+t.height<0,f=new IntersectionObserver(p=>{let[v]=p;v.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),f.unobserve(i))});return f.observe(i),s||l}inPage(i){let a=E._getSentenceContainerOfWord(i).getBoundingClientRect(),t=i.getBoundingClientRect(),l=t.top+t.height>a.top+a.height,s=t.top+t.height<0,f=new IntersectionObserver(p=>{let[v]=p;v.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),f.unobserve(i))});return f.observe(i),s||l}scrollToPage(i){let r=this.el.shadowRoot.querySelector(".pages__container"),a=this.el.shadowRoot.querySelector("#"+i);r.scrollBy({top:null!=this.pageScrolling.match("vertical")?a.offsetTop-r.scrollTop:0,left:null!=this.pageScrolling.match("vertical")?0:a.offsetLeft-r.scrollLeft,behavior:this.scrollBehaviour}),a.scrollTo(0,0)}scrollByHeight(i){let r=E._getSentenceContainerOfWord(i),a=i.parentElement.getBoundingClientRect(),t=new IntersectionObserver(l=>{let[s]=l;s.isIntersecting?t.unobserve(i):r.scrollTo({top:r.getBoundingClientRect().height-a.height,left:0,behavior:this.scrollBehaviour})},{root:r,threshold:[0,.25,.5,.75,1]});t.observe(i)}scrollByWidth(i){let r=E._getSentenceContainerOfWord(i),a=i.getBoundingClientRect();r.scrollTo({left:a.left-10,top:0,behavior:this.scrollBehaviour})}scrollTo(i){i.scrollIntoView({behavior:this.scrollBehaviour})}disconnectedCallback(){this.stop()}componentDidUpdate(){this.svgOverlay&&this.changeFill()}componentWillLoad(){var i=this;return(0,I.Z)(function*(){i.language.length<3&&(i.language=null!=i.language.match("fr")?"fra":null!==i.language.match("es")?"spa":"eng"),"smooth"!==i.scrollBehaviour&&"auto"!==i.scrollBehaviour&&(console.log("Invalid scroll-behaviour value, using default (smooth)"),i.scrollBehaviour="smooth"),(isNaN(i.playbackRateRange)||i.playbackRateRange<0||i.playbackRateRange>99)&&(console.log("Invalid playback-rate-range value, using default (15)."),i.playbackRateRange=15);const r=i.el.querySelector("read-along > text");if(i.parsed_text=r?le(r):yield function Me(i){return Y.apply(this,arguments)}(i.href),null===i.parsed_text)i.parsed_text=[],i.assetsStatus.RAS=3;else if(0===i.parsed_text.length)i.assetsStatus.RAS=2;else{i.images={},i.translations={};for(const[t,l]of i.parsed_text.entries()){if("img"in l){var a=i.urlTransform(l.img);i.images[t]=i.urlTransform(l.img),/^(https?:[/]|assets)[/]\b/.test(a)&&((yield qe(a))||(i.images[t]=null))}else i.images[t]=null;if("paragraphs"in l)try{const s=l.paragraphs,f=s[s.length-1].querySelectorAll("s:not(.translation)"),p=f[f.length-1].querySelector("w:last-of-type");i.endOfPageTags[p.id]=[parseFloat(p.getAttribute("time")),1e3*parseFloat(p.getAttribute("dur"))],i.finalTaggedWord=p.id}catch{}}i.assetsStatus.RAS=1}i.hasLoaded+=1})()}componentDidLoad(){const i="https://unpkg.com/@bcgov/bc-sans@1.0.1/css/BCSans.css",r="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined&display=swap";let a=document.querySelector(`link[href="${r}"]`),t=document.querySelector(`link[href="${i}"]`);a||(a=document.createElement("link"),a.setAttribute("rel","stylesheet"),a.setAttribute("href",r),document.head.appendChild(a)),t||(t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",i),document.head.appendChild(t)),this.processed_alignment=function He(i){let r={};for(const a of i)for(const t of a.paragraphs)for(const l of Array.from(t.querySelectorAll("w[time][dur]"))){const s=l.getAttribute("time"),f=l.getAttribute("dur");null!==s&&null!==f&&(r[l.getAttribute("id")]=[Math.round(1e3*parseFloat(s)),Math.round(1e3*parseFloat(f))])}return r}(this.parsed_text),this.alignment_failed=0==Object.keys(this.processed_alignment).length,this.audio_howl_sprites=new K.Howl({src:[this.audio],preload:!1}),this.audio_howl_sprites.once("load",()=>{this.processed_alignment.all=[0,1e3*this.audio_howl_sprites.duration()],this.duration=this.audio_howl_sprites.duration(),this.audio_howl_sprites=this.buildSprite(this.audio,this.processed_alignment),this.reading$=this.audio_howl_sprites._reading$.pipe(Re()).subscribe(l=>{if(this.playing){this.autoPauseAtEndOfPage&&l in this.endOfPageTags&&this.finalTaggedWord!==l&&(this.autoPauseTimer&&window.clearTimeout(this.autoPauseTimer),this.autoPauseTimer=window.setTimeout(()=>{this.pause()},this.endOfPageTags[l][1]-25));let s=this.tagToQuery(l),f=this.el.shadowRoot.querySelector(s);this.el.shadowRoot.querySelectorAll(".reading").forEach(g=>g.classList.remove("reading")),f.classList.add("reading");let p=E._getSentenceContainerOfWord(f).parentElement.id;p!==this.current_page&&(void 0!==this.current_page&&!this.isScrolling&&this.scrollToPage(p),this.current_page=p);const v=Math.ceil(this.el.shadowRoot.querySelector(".pages__container").getBoundingClientRect().left)+1,b=Math.ceil(this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect().left);(f.getBoundingClientRect().left<0||b!==v)&&(this.isScrolling||this.scrollToPage(p)),this.inPageContentOverflow(f)&&this.autoScroll&&(f.scrollIntoView({block:"start",inline:"nearest"}),this.isScrolling||this.scrollByHeight(f)),this.inParagraphContentOverflow(f)&&this.autoScroll&&(f.scrollIntoView(!1),this.isScrolling||this.scrollByWidth(f))}}),this.hasLoaded+=1,this.assetsStatus.AUDIO=1}),this.audio_howl_sprites.once("loaderror",()=>{this.hasLoaded+=1,this.assetsStatus.AUDIO=3}),this.audio_howl_sprites.load()}componentDidRender(){!this.displayTranslation&&this.parsed_text&&this.parsed_text.length>0&&(this.toggleTextTranslation(),this.displayTranslation=!0),this.latestTranslation&&(this.el.shadowRoot.querySelector(this.latestTranslation).focus(),this.latestTranslation="")}getRawI18nString(i){return this.i18nStrings[this.language]&&this.i18nStrings[this.language][i]?this.i18nStrings[this.language][i]:this.i18nStrings.eng[i]?this.i18nStrings.eng[i]:i}getI18nString(i,r={}){let a=this.getRawI18nString(i);for(const[t,l]of Object.entries(r))a=a.replace("<"+t+">",l);return a}addLine(i){this.hasTextTranslations||(this.hasTextTranslations=!0);let r={};r[i.id]="",this.translations=Object.assign(Object.assign({},this.translations),r),this.latestTranslation="#"+i.id+"translation"}removeLine(i){let r={};r[i.id]=null,this.translations=Object.assign(Object.assign({},this.translations),r)}updateTranslation(i,r){this.translations[i]=r}handleFiles(i,r){var a=this;return(0,I.Z)(function*(){let t=URL.createObjectURL(i),l={};l[r]=t,a.images=Object.assign(Object.assign({},a.images),l)})()}deleteImage(i){let r={};r[i]=null,this.images=Object.assign(Object.assign({},this.images),r)}render(){return(0,_.h)("div",{id:"read-along-container",class:"read-along-container"},(0,_.h)("div",{id:"title__slot__container"},(0,_.h)("h1",{class:"slot__header"},(0,_.h)("slot",{name:"read-along-header"})),(0,_.h)("h3",{class:"slot__subheader"},(0,_.h)("slot",{name:"read-along-subheader"}))),Object.entries(this.assetsStatus).map(i=>{let r=i[0],a=i[1];if(2===a){let t=this.getPathFromAssetType(r);return(0,_.h)(this.ErrorMessage,{msg:this.getI18nString("parse-error",{FILETYPE:r,FILENAME:t}),data_cy:r+"-error"})}if(3===a){let t=this.getPathFromAssetType(r);return(0,_.h)(this.ErrorMessage,{msg:this.getI18nString("loading-error",{FILETYPE:r,FILENAME:t}),data_cy:r+"-error"})}}),this.alignment_failed&&1===this.assetsStatus.RAS&&(0,_.h)(this.ErrorMessage,{msg:this.getI18nString("alignment-error"),data_cy:"alignment-error"}),(0,_.h)("div",{onScroll:()=>{this.handleScrollEvent()},"data-cy":"text-container",class:"pages__container theme--"+this.theme+" "+this.pageScrolling},this.showGuide?(0,_.h)(this.Guide,null):null,1==this.assetsStatus.RAS&&this.parsed_text.map(i=>(0,_.h)(this.Page,{pageData:i})),this.hasLoaded<2&&(0,_.h)("div",{class:"loader"})),this.alignment_failed||(0,_.h)("div",{onClick:i=>this.goToSeekFromProgress(i),id:"all","data-cy":"progress-bar",class:"overlay__container theme--"+this.theme+" background--"+this.theme},this.svgOverlay?(0,_.h)(this.Overlay,null):null),1==this.assetsStatus.AUDIO&&(0,_.h)(this.ControlPanel,null),this.cssUrl&&null!=this.cssUrl.match(".css")&&(0,_.h)("link",{href:this.cssUrl,rel:"stylesheet"}))}static get assetsDirs(){return["assets"]}get el(){return(0,_.g)(this)}};E.style='.font-weight--100{font-weight:100}.font-weight--200{font-weight:200}.font-weight--300{font-weight:300}.font-weight--400{font-weight:400}.font-weight--500{font-weight:500}.font-weight--600{font-weight:600}.font-weight--700{font-weight:700}.font-weight--800{font-weight:800}.font-weight--900{font-weight:900}.shadowed{text-shadow:0.3px 0.2px black}.theme--light.sentence,.theme--light.page__col__image,.theme--light.page__container,.theme--light.scroll-guide__container{background-color:#fff}.theme--dark.sentence,.theme--dark.page__col__image,.theme--dark.page__container,.theme--dark.scroll-guide__container{background-color:#3c4369}.sentence__word,.sentence__text,.scroll-guide__text{line-height:1.5;border-radius:0.3125em;position:relative;padding:0.0625em;font-size:1em}.theme--light.ripple,.theme--light.reading,.theme--light.sentence__word,.theme--light.sentence__text,.theme--light.scroll-guide__text{color:#040508}.theme--dark.ripple,.theme--dark.reading,.theme--dark.sentence__word,.theme--dark.sentence__text,.theme--dark.scroll-guide__text{color:#fff}.theme--light.ripple:active,.theme--light.reading:active,.theme--light.sentence__word:hover{color:#fff;background:gray radial-gradient(circle, transparent 1%, gray 1%) center/15000%}.theme--dark.ripple:active,.theme--dark.reading:active,.theme--dark.sentence__word:hover{color:#fff;background:#a6a6a6 radial-gradient(circle, transparent 1%, #a6a6a6 1%) center/15000%}.theme--light.sentence__word.reading{color:#fff;background:#666666 radial-gradient(circle, transparent 1%, #666666 1%) center/15000%}.theme--dark.sentence__word.reading{color:#040508;background:#fff radial-gradient(circle, transparent 1%, #fff 1%) center/15000%}.theme--light.page__col__img-placeholder{border:0.046875em dotted gray}.theme--dark.page__col__img-placeholder{border:0.046875em dotted #a6a6a6}.theme--light.scroll-guide__container,.theme--light.overlay__container{border:0.046875em solid gray}.theme--dark.scroll-guide__container,.theme--dark.overlay__container{border:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-left:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-left:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-right:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-right:0.046875em solid #a6a6a6}.theme--light.pages__container{border-top:0.046875em solid gray}.theme--dark.pages__container{border-top:0.046875em solid #a6a6a6}.theme--light.control-panel{border-bottom:0.046875em solid gray}.theme--dark.control-panel{border-bottom:0.046875em solid #a6a6a6}.ripple:hover,.reading:hover,.sentence__word:hover{cursor:pointer}@viewport{width:device-width}button{border:0;cursor:pointer}html{background-color:#fff;box-sizing:border-box;height:100%}*:before,*:after{box-sizing:inherit}body{-webkit-font-smoothing:antialiased;color:#040508;font-family:"BCSans", "Noto Sans", Verdana, Arial, sans-serif;min-height:100%;overflow-x:hidden;overflow-y:hidden;text-rendering:optimizeLegibility}a{background:transparent;color:#c69;text-decoration:none;transition:color 0.2s;outline:none}a:active,a:focus{outline:none}img{height:90%;max-width:90%;object-fit:cover}h1,h2,h3,h4,h5,h6{font-family:"BCSans", "Noto Sans", Verdana, Arial, sans-serif;font-weight:normal}p,mat-chip,mat-tab-label,span,button,div,a{font-family:"BCSans", "Noto Sans", Verdana, Arial, sans-serif}.theme--light::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--light::-webkit-scrollbar-track{background:#fff}.theme--light::-webkit-scrollbar-thumb{background:#040508;border-radius:0.3125em;height:0.625em;width:0.625em}.theme--dark::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--dark::-webkit-scrollbar-track{background:#3c4369}.theme--dark::-webkit-scrollbar-thumb{background:#fff;border-radius:0.3125em;height:0.625em;width:0.625em}.bg-img{background-image:url("../assets/img/bg.jpg");height:100vh;overflow:overlay;overflow-x:hidden;background-position:center;background-repeat:no-repeat;background-size:cover;min-height:100%}.shadow-box{box-shadow:0 0.3125rem 1rem 0 rgba(0, 0, 0, 0.24);padding:25px;background:rgba(255, 255, 255, 0.94);border-radius:5px}.font-xs{font-size:0.5em}.font-sm{font-size:0.75em}.font-md{font-size:1em}.font-lg{font-size:1.25em}.font-xl{font-size:1.5em}.font-xxl{font-size:2em}.faded{opacity:0.2;color:black}table{table-layout:fixed}.center{margin-left:auto;margin-right:auto;text-align:center}.container{max-width:80em}.background--light{background:#fff}.stop-color--light{fill:#fff}.color--light{color:#040508}.background--dark{background:#3c4369}.stop-color--dark{fill:#3c4369}.color--dark{color:#fff}.abs{position:absolute}.top-0{top:0}.left-0{left:0}.right-0{right:0}.top-5{top:0.3125em}.left-5{left:0.3125em}.right-5{right:0.3125em}.top-10{top:0.625em}.left-10{left:0.625em}.right-10{right:0.625em}.top-15{top:0.9375em}.left-15{left:0.9375em}.right-15{right:0.9375em}.top-20{top:1.25em}.left-20{left:1.25em}.right-20{right:1.25em}.top-25{top:1.5625em}.left-25{left:1.5625em}.right-25{right:1.5625em}.top-30{top:1.875em}.left-30{left:1.875em}.right-30{right:1.875em}.top-35{top:2.1875em}.left-35{left:2.1875em}.right-35{right:2.1875em}.top-40{top:2.5em}.left-40{left:2.5em}.right-40{right:2.5em}.top-45{top:2.8125em}.left-45{left:2.8125em}.right-45{right:2.8125em}.top-50{top:3.125em}.left-50{left:3.125em}.right-50{right:3.125em}.invisible{visibility:hidden !important}.control-panel{border-radius:0 0 0.3125em 0.3125em;position:relative;min-width:100%;display:inline-flex}.control-panel__buttons--left{width:25%;float:left;margin-top:0.3125em;padding:0.3125em}.control-panel__buttons--center{width:25%;text-align:center;margin:0 auto}.control-panel__buttons--right{width:25%;text-align:right;float:right;margin-top:0.3125em;margin-right:0.3125em}.control-panel__buttons__header{margin:0.3125em}.control-panel__control{border-radius:0.3125em;margin:0.5em auto}.control-panel__control:focus{outline:none}.settings{margin-left:0;margin-right:0;text-align:center}.settings__option__header{margin-bottom:0.5em}#waveform{background-size:contain;background-repeat:no-repeat;background-position:center center;width:100%;height:100%;position:absolute;top:0;left:0}.low{z-index:700}.overlay__container{width:100%;max-width:100%;height:3.125em;position:relative;z-index:8000}#overlay__object{z-index:700;max-height:100%;min-width:100%;fill:"transparent"}#overlay__object.theme--light{stroke:gray}#overlay__object.theme--dark{stroke:#a6a6a6}.scroll-guide__container{text-align:center;z-index:700;width:20%;position:fixed;left:50%;transform:translate(-50%, 0)}.scroll-guide__text{font-size:1.25em}.pages__container{overflow:auto;max-height:55vh;height:100%;max-width:100%;width:100%;position:relative;display:-webkit-inline-flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;border-radius:0.3125em 0.3125em 0 0}.page{overflow-y:hidden;overflow-x:auto;flex-grow:1;min-width:99.6%;width:100%;max-width:55em}.page__container{display:grid;grid-template-columns:[col-start] [col-end];grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:"image page-no" "image text";justify-items:stretch}.page__counter{grid-area:page-no;margin:0.625em 0 0 0.9375em;text-align:right;padding-right:0.9375em;max-height:5rem}.page__col__image{grid-area:image;max-height:100%;text-align:center;margin:5%;padding:0;border-radius:0 0 0 0;position:relative}.page__col__image img{max-height:55vh;max-width:95%;object-fit:contain}.page__col__img-placeholder{cursor:pointer}.page__col__text{grid-area:text}.page.two-column-layout-page{grid-template-columns:40% auto}.page.one-column-layout-page{display:grid;grid-template-columns:auto;grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:"page-no" "text";justify-items:stretch}.page.one-column-layout-page .page__col__image{grid-area:text}.hide-page-counter .page__counter{display:none}.pages__container.vertical{flex-direction:column !important}.pages__container.vertical>.page{min-height:100%}.paragraph__container{overflow-y:auto;min-width:40%;padding-bottom:0.75em}.sentence{margin:0 1.5em;text-align:left;max-width:90%}.sentence__container{margin:3.75em 0.625em 3.75em 0.625em;scroll-behavior:smooth;max-width:100%;position:relative;overflow-y:auto;overflow-x:hidden}.sentence__container__buttons{position:absolute;top:0;right:0}.sentence__text{font-size:1.5em;padding:0}.sentence__word{font-size:1.5em}.sentence__translation .sentence__text,.sentence__translation .sentence__word{color:#777;font-style:italic;font-size:95%}.sentence__translation__button{margin-left:10px}.sentence__translation__button i{font-size:medium}.paragraph.visually_aligned .sentence .sentence__text,.paragraph.visually_aligned .sentence .sentence__word{display:table-cell}.paragraph.visually_aligned .sentence .sentence__text:empty{display:none}.paragraph.visually_aligned{display:table}.paragraph.visually_aligned .sentence{display:table-row}.read-along-container{max-width:75em;margin:0 auto;overflow-y:hidden;overflow-x:hidden;padding:0.3125em;position:relative}.read-along-container--fullscreen{max-width:80%;min-width:80%}.slot__header{margin-bottom:0.3125em}.slot__subheader{margin-top:0;margin-left:1em}.loader{border:16px solid #eee;border-radius:50%;border-right-color:#aa0;border-bottom-color:#a33;border-left-color:#111;width:10rem;height:10rem;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;position:fixed;top:calc(50vh - 10rem);left:calc(50vw - 10rem);z-index:1000;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.alert{position:relative;padding:1rem 1rem;margin-bottom:1rem;border:1px solid transparent;border-radius:0.25rem;transition-delay:2s;transition:visibility 5s height 5s}.alert.status-success{color:#0f5132;background-color:#d1e7dd;border-color:#badbcc}.alert.status-error{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert.fade{visibility:collapse;height:0 !important;overflow:hidden !important;line-height:0 !important;padding:0 !important;margin:0 !important;border:0 !important}.animate-transition,.ripple,.reading{transition:background 0.4s}.animate-transition:active,.ripple:active,.reading:active{transition:background 0s}.ripple,.reading{background-position:center;padding:0.0625em}.ripple:active,.reading:active{background-size:100%}.progress{position:absolute;top:0;left:0;height:100%;width:0}.progress.theme--light{background-color:rgba(128, 128, 128, 0.2)}.progress.theme--dark{background-color:rgba(166, 166, 166, 0.2)}.material-icons{font-family:"Material Icons";font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.material-icons-outlined{font-family:"Material Icons Outlined";font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}[contenteditable][data-placeholder]:empty:before{content:attr(data-placeholder);position:absolute;color:gray;cursor:text;background-color:transparent}.drop-area{border:2px dashed #ccc;border-radius:20px;width:50%;font-family:sans-serif;margin:50px auto;padding:20px}.drop-area.highlight{border-color:purple}p{margin-top:0}.my-form{margin-bottom:10px}#gallery{margin-top:10px}#gallery img{width:150px;margin-bottom:10px;margin-right:10px;vertical-align:middle}.button{display:inline-block;padding:10px;background:#ccc;cursor:pointer;border-radius:5px;border:1px solid #ccc}.button:hover{background:#ddd}.fileElem{display:none}#img-remover{margin:60px;position:absolute;z-index:9999;border-radius:50px;color:red}#image-container{display:contents}'}}]);