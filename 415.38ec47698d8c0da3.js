"use strict";(self.webpackChunkstudio_web=self.webpackChunkstudio_web||[]).push([[415],{415:(Fe,N,B)=>{B.r(N),B.d(N,{read_along:()=>P});var I=B(861),_=B(964),D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z=function se(o,n,i){return o(i={path:n,exports:{},require:function(r,s){return function le(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}(function(o,n){!function(){var i=function(){this.init()};i.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||r;if(e=parseFloat(e),t.ctx||S(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var a=0;a<t._howls.length;a++)if(!t._howls[a]._webAudio)for(var c=t._howls[a]._getSoundIds(),h=0;h<c.length;h++){var f=t._howls[a]._soundById(c[h]);f&&f._node&&(f._node.volume=f._volume*e)}return t}return t._volume},mute:function(e){var t=this||r;t.ctx||S(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,r.ctx.currentTime);for(var a=0;a<t._howls.length;a++)if(!t._howls[a]._webAudio)for(var c=t._howls[a]._getSoundIds(),h=0;h<c.length;h++){var f=t._howls[a]._soundById(c[h]);f&&f._node&&(f._node.muted=!!e||f._muted)}return t},stop:function(){for(var e=this||r,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||r,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,S()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,t=null;try{t=typeof Audio<"u"?new Audio:null}catch{return e}if(!t||"function"!=typeof t.canPlayType)return e;var a=t.canPlayType("audio/mpeg;").replace(/^no$/,""),c=e._navigator?e._navigator.userAgent:"",h=c.match(/OPR\/([0-6].)/g),f=h&&parseInt(h[0].split("/")[1],10)<33,u=-1!==c.indexOf("Safari")&&-1===c.indexOf("Chrome"),m=c.match(/Version\/(.*?) /),v=u&&m&&parseInt(m[1],10)<15;return e._codecs={mp3:!(f||!a&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!a,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(v||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(v||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(a){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var c=new Audio;c._unlocked=!0,e._releaseHtml5Audio(c)}catch{e.noAudio=!0;break}for(var h=0;h<e._howls.length;h++)if(!e._howls[h]._webAudio)for(var f=e._howls[h]._getSoundIds(),u=0;u<f.length;u++){var m=e._howls[h]._soundById(f[u]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}e._autoResume();var v=e.ctx.createBufferSource();v.buffer=e._scratchBuffer,v.connect(e.ctx.destination),typeof v.start>"u"?v.noteOn(0):v.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),v.onended=function(){v.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var A=0;A<e._howls.length;A++)e._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&typeof Promise<"u"&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||r;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&!(typeof e.ctx.suspend>"u")&&r.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var a=0;a<e._howls[t]._sounds.length;a++)if(!e._howls[t]._sounds[a]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var c=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(c,c)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&!(typeof e.ctx.resume>"u")&&r.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var r=new i,s=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var t=this;return r.ctx||S(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=r.usingWebAudio&&!t._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(r.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var a=0;a<e._src.length;a++){var c,h;if(e._format&&e._format[a])c=e._format[a];else{if("string"!=typeof(h=e._src[a])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(c=/^data:audio\/([^;,]+);/i.exec(h))||(c=/\.([^.]+)$/.exec(h.split("?",1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&r.codecs(c)){t=e._src[a];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new l(e),e._webAudio&&p(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var a=this,c=null;if("number"==typeof e)c=e,e=null;else{if("string"==typeof e&&"loaded"===a._state&&!a._sprite[e])return null;if(typeof e>"u"&&(e="__default",!a._playLock)){for(var h=0,f=0;f<a._sounds.length;f++)a._sounds[f]._paused&&!a._sounds[f]._ended&&(h++,c=a._sounds[f]._id);1===h?e=null:c=null}}var u=c?a._soundById(c):a._inactiveSound();if(!u)return null;if(c&&!e&&(e=u._sprite||"__default"),"loaded"!==a._state){u._sprite=e,u._ended=!1;var m=u._id;return a._queue.push({event:"play",action:function(){a.play(m)}}),m}if(c&&!u._paused)return t||a._loadQueue("play"),u._id;a._webAudio&&r._autoResume();var v=Math.max(0,u._seek>0?u._seek:a._sprite[e][0]/1e3),A=Math.max(0,(a._sprite[e][0]+a._sprite[e][1])/1e3-v),E=1e3*A/Math.abs(u._rate),F=a._sprite[e][0]/1e3,q=(a._sprite[e][0]+a._sprite[e][1])/1e3;u._sprite=e,u._ended=!1;var Y=function(){u._paused=!1,u._seek=v,u._start=F,u._stop=q,u._loop=!(!u._loop&&!a._sprite[e][2])};if(!(v>=q)){var w=u._node;if(a._webAudio){var ie=function(){a._playLock=!1,Y(),a._refreshBuffer(u),w.gain.setValueAtTime(u._muted||a._muted?0:u._volume,r.ctx.currentTime),u._playStart=r.ctx.currentTime,typeof w.bufferSource.start>"u"?w.bufferSource.noteGrainOn(0,v,u._loop?86400:A):w.bufferSource.start(0,v,u._loop?86400:A),E!==1/0&&(a._endTimers[u._id]=setTimeout(a._ended.bind(a,u),E)),t||setTimeout(function(){a._emit("play",u._id),a._loadQueue()},0)};"running"===r.state&&"interrupted"!==r.ctx.state?ie():(a._playLock=!0,a.once("resume",ie),a._clearTimer(u._id))}else{var oe=function(){w.currentTime=v,w.muted=u._muted||a._muted||r._muted||w.muted,w.volume=u._volume*r.volume(),w.playbackRate=u._rate;try{var O=w.play();if(O&&typeof Promise<"u"&&(O instanceof Promise||"function"==typeof O.then)?(a._playLock=!0,Y(),O.then(function(){a._playLock=!1,w._unlocked=!0,t?a._loadQueue():a._emit("play",u._id)}).catch(function(){a._playLock=!1,a._emit("playerror",u._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),u._ended=!0,u._paused=!0})):t||(a._playLock=!1,Y(),a._emit("play",u._id)),w.playbackRate=u._rate,w.paused)return void a._emit("playerror",u._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||u._loop?a._endTimers[u._id]=setTimeout(a._ended.bind(a,u),E):(a._endTimers[u._id]=function(){a._ended(u),w.removeEventListener("ended",a._endTimers[u._id],!1)},w.addEventListener("ended",a._endTimers[u._id],!1))}catch(Le){a._emit("playerror",u._id,Le)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===w.src&&(w.src=a._src,w.load());var Pe=window&&window.ejecta||!w.readyState&&r._navigator.isCocoonJS;if(w.readyState>=3||Pe)oe();else{a._playLock=!0,a._state="loading";var ae=function(){a._state="loaded",oe(),w.removeEventListener(r._canPlayEvent,ae,!1)};w.addEventListener(r._canPlayEvent,ae,!1),a._clearTimer(u._id)}}return u._id}a._ended(u)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var a=t._getSoundIds(e),c=0;c<a.length;c++){t._clearTimer(a[c]);var h=t._soundById(a[c]);if(h&&!h._paused&&(h._seek=t.seek(a[c]),h._rateSeek=0,h._paused=!0,t._stopFade(a[c]),h._node))if(t._webAudio){if(!h._node.bufferSource)continue;typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),t._cleanBuffer(h._node)}else(!isNaN(h._node.duration)||h._node.duration===1/0)&&h._node.pause();arguments[1]||t._emit("pause",h?h._id:null)}return t},stop:function(e,t){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"stop",action:function(){a.stop(e)}}),a;for(var c=a._getSoundIds(e),h=0;h<c.length;h++){a._clearTimer(c[h]);var f=a._soundById(c[h]);f&&(f._seek=f._start||0,f._rateSeek=0,f._paused=!0,f._ended=!0,a._stopFade(c[h]),f._node&&(a._webAudio?f._node.bufferSource&&(typeof f._node.bufferSource.stop>"u"?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),a._cleanBuffer(f._node)):(!isNaN(f._node.duration)||f._node.duration===1/0)&&(f._node.currentTime=f._start||0,f._node.pause(),f._node.duration===1/0&&a._clearSound(f._node))),t||a._emit("stop",f._id))}return a},mute:function(e,t){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(e,t)}}),a;if(typeof t>"u"){if("boolean"!=typeof e)return a._muted;a._muted=e}for(var c=a._getSoundIds(t),h=0;h<c.length;h++){var f=a._soundById(c[h]);f&&(f._muted=e,f._interval&&a._stopFade(f._id),a._webAudio&&f._node?f._node.gain.setValueAtTime(e?0:f._volume,r.ctx.currentTime):f._node&&(f._node.muted=!!r._muted||e),a._emit("mute",f._id))}return a},volume:function(){var a,c,u,e=this,t=arguments;if(0===t.length)return e._volume;if(1===t.length||2===t.length&&typeof t[1]>"u"){var h=e._getSoundIds(),f=h.indexOf(t[0]);f>=0?c=parseInt(t[0],10):a=parseFloat(t[0])}else t.length>=2&&(a=parseFloat(t[0]),c=parseInt(t[1],10));if(!(typeof a<"u"&&a>=0&&a<=1))return(u=c?e._soundById(c):e._sounds[0])?u._volume:0;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;typeof c>"u"&&(e._volume=a),c=e._getSoundIds(c);for(var m=0;m<c.length;m++)(u=e._soundById(c[m]))&&(u._volume=a,t[2]||e._stopFade(c[m]),e._webAudio&&u._node&&!u._muted?u._node.gain.setValueAtTime(a,r.ctx.currentTime):u._node&&!u._muted&&(u._node.volume=a*r.volume()),e._emit("volume",u._id));return e},fade:function(e,t,a,c){var h=this;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"fade",action:function(){h.fade(e,t,a,c)}}),h;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),a=parseFloat(a),h.volume(e,c);for(var f=h._getSoundIds(c),u=0;u<f.length;u++){var m=h._soundById(f[u]);if(m){if(c||h._stopFade(f[u]),h._webAudio&&!m._muted){var v=r.ctx.currentTime,A=v+a/1e3;m._volume=e,m._node.gain.setValueAtTime(e,v),m._node.gain.linearRampToValueAtTime(t,A)}h._startFadeInterval(m,e,t,a,f[u],typeof c>"u")}}return h},_startFadeInterval:function(e,t,a,c,h,f){var u=this,m=t,v=a-t,A=Math.abs(v/.01),E=Math.max(4,A>0?c/A:c),F=Date.now();e._fadeTo=a,e._interval=setInterval(function(){var q=(Date.now()-F)/c;F=Date.now(),m+=v*q,m=Math.round(100*m)/100,m=v<0?Math.max(a,m):Math.min(a,m),u._webAudio?e._volume=m:u.volume(m,e._id,!0),f&&(u._volume=m),(a<t&&m<=a||a>t&&m>=a)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,u.volume(a,e._id),u._emit("fade",e._id))},E)},_stopFade:function(e){var t=this,a=t._soundById(e);return a&&a._interval&&(t._webAudio&&a._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(a._interval),a._interval=null,t.volume(a._fadeTo,e),a._fadeTo=null,t._emit("fade",e)),t},loop:function(){var a,c,h,e=this,t=arguments;if(0===t.length)return e._loop;if(1===t.length){if("boolean"!=typeof t[0])return!!(h=e._soundById(parseInt(t[0],10)))&&h._loop;e._loop=a=t[0]}else 2===t.length&&(a=t[0],c=parseInt(t[1],10));for(var f=e._getSoundIds(c),u=0;u<f.length;u++)(h=e._soundById(f[u]))&&(h._loop=a,e._webAudio&&h._node&&h._node.bufferSource&&(h._node.bufferSource.loop=a,a&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop,e.playing(f[u])&&(e.pause(f[u],!0),e.play(f[u],!0)))));return e},rate:function(){var a,c,u,e=this,t=arguments;if(0===t.length)c=e._sounds[0]._id;else if(1===t.length){var h=e._getSoundIds(),f=h.indexOf(t[0]);f>=0?c=parseInt(t[0],10):a=parseFloat(t[0])}else 2===t.length&&(a=parseFloat(t[0]),c=parseInt(t[1],10));if("number"!=typeof a)return(u=e._soundById(c))?u._rate:e._rate;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;typeof c>"u"&&(e._rate=a),c=e._getSoundIds(c);for(var m=0;m<c.length;m++)if(u=e._soundById(c[m])){e.playing(c[m])&&(u._rateSeek=e.seek(c[m]),u._playStart=e._webAudio?r.ctx.currentTime:u._playStart),u._rate=a,e._webAudio&&u._node&&u._node.bufferSource?u._node.bufferSource.playbackRate.setValueAtTime(a,r.ctx.currentTime):u._node&&(u._node.playbackRate=a);var v=e.seek(c[m]),A=(e._sprite[u._sprite][0]+e._sprite[u._sprite][1])/1e3-v,E=1e3*A/Math.abs(u._rate);(e._endTimers[c[m]]||!u._paused)&&(e._clearTimer(c[m]),e._endTimers[c[m]]=setTimeout(e._ended.bind(e,u),E)),e._emit("rate",u._id)}return e},seek:function(){var a,c,e=this,t=arguments;if(0===t.length)e._sounds.length&&(c=e._sounds[0]._id);else if(1===t.length){var h=e._getSoundIds(),f=h.indexOf(t[0]);f>=0?c=parseInt(t[0],10):e._sounds.length&&(c=e._sounds[0]._id,a=parseFloat(t[0]))}else 2===t.length&&(a=parseFloat(t[0]),c=parseInt(t[1],10));if(typeof c>"u")return 0;if("number"==typeof a&&("loaded"!==e._state||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var u=e._soundById(c);if(u){if(!("number"==typeof a&&a>=0)){if(e._webAudio){var E=e.playing(c)?r.ctx.currentTime-u._playStart:0,F=u._rateSeek?u._rateSeek-u._seek:0;return u._seek+(F+E*Math.abs(u._rate))}return u._node.currentTime}var m=e.playing(c);m&&e.pause(c,!0),u._seek=a,u._ended=!1,e._clearTimer(c),!e._webAudio&&u._node&&!isNaN(u._node.duration)&&(u._node.currentTime=a);var v=function(){m&&e.play(c,!0),e._emit("seek",c)};if(m&&!e._webAudio){var A=function(){e._playLock?setTimeout(A,0):v()};setTimeout(A,0)}else v()}return e},playing:function(e){var t=this;if("number"==typeof e){var a=t._soundById(e);return!!a&&!a._paused}for(var c=0;c<t._sounds.length;c++)if(!t._sounds[c]._paused)return!0;return!1},duration:function(e){var t=this,a=t._duration,c=t._soundById(e);return c&&(a=t._sprite[c._sprite][1]/1e3),a},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,a=0;a<t.length;a++)t[a]._paused||e.stop(t[a]._id),e._webAudio||(e._clearSound(t[a]._node),t[a]._node.removeEventListener("error",t[a]._errorFn,!1),t[a]._node.removeEventListener(r._canPlayEvent,t[a]._loadFn,!1),t[a]._node.removeEventListener("ended",t[a]._endFn,!1),r._releaseHtml5Audio(t[a]._node)),delete t[a]._node,e._clearTimer(t[a]._id);var c=r._howls.indexOf(e);c>=0&&r._howls.splice(c,1);var h=!0;for(a=0;a<r._howls.length;a++)if(r._howls[a]._src===e._src||e._src.indexOf(r._howls[a]._src)>=0){h=!1;break}return d&&h&&delete d[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,a,c){return"function"==typeof t&&this["_on"+e].push(c?{id:a,fn:t,once:c}:{id:a,fn:t}),this},off:function(e,t,a){var c=this,h=c["_on"+e],f=0;if("number"==typeof t&&(a=t,t=null),t||a)for(f=0;f<h.length;f++){var u=a===h[f].id;if(t===h[f].fn&&u||!t&&u){h.splice(f,1);break}}else if(e)c["_on"+e]=[];else{var m=Object.keys(c);for(f=0;f<m.length;f++)0===m[f].indexOf("_on")&&Array.isArray(c[m[f]])&&(c[m[f]]=[])}return c},once:function(e,t,a){return this.on(e,t,a,1),this},_emit:function(e,t,a){for(var c=this,h=c["_on"+e],f=h.length-1;f>=0;f--)(!h[f].id||h[f].id===t||"load"===e)&&(setTimeout(function(u){u.call(this,t,a)}.bind(c,h[f].fn),0),h[f].once&&c.off(e,h[f].fn,h[f].id));return c._loadQueue(e),c},_loadQueue:function(e){var t=this;if(t._queue.length>0){var a=t._queue[0];a.event===e&&(t._queue.shift(),t._loadQueue()),e||a.action()}return t},_ended:function(e){var t=this,a=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var c=!(!e._loop&&!t._sprite[a][2]);if(t._emit("end",e._id),!t._webAudio&&c&&t.stop(e._id,!0).play(e._id),t._webAudio&&c){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var h=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),h)}return t._webAudio&&!c&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),r._autoSuspend()),!t._webAudio&&!c&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var a=t._soundById(e);a&&a._node&&a._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,a=0;a<t._sounds.length;a++)if(e===t._sounds[a]._id)return t._sounds[a];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new l(e)},_drain:function(){var e=this,t=e._pool,a=0,c=0;if(!(e._sounds.length<t)){for(c=0;c<e._sounds.length;c++)e._sounds[c]._ended&&a++;for(c=e._sounds.length-1;c>=0;c--){if(a<=t)return;e._sounds[c]._ended&&(e._webAudio&&e._sounds[c]._node&&e._sounds[c]._node.disconnect(0),e._sounds.splice(c,1),a--)}}},_getSoundIds:function(e){if(typeof e>"u"){for(var a=[],c=0;c<this._sounds.length;c++)a.push(this._sounds[c]._id);return a}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=d[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),this},_cleanBuffer:function(e){var a=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),a))try{e.bufferSource.buffer=r._scratchBuffer}catch{}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(e){this._parent=e,this.init()};l.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,a=r._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(a,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=a*r.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var d={},p=function(e){var t=e._src;if(d[t])return e._duration=d[t].duration,void g(e);if(/^data:[^;]+;base64,/.test(t)){for(var a=atob(t.split(",")[1]),c=new Uint8Array(a.length),h=0;h<a.length;++h)c[h]=a.charCodeAt(h);b(c.buffer,e)}else{var f=new XMLHttpRequest;f.open(e._xhr.method,t,!0),f.withCredentials=e._xhr.withCredentials,f.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(u){f.setRequestHeader(u,e._xhr.headers[u])}),f.onload=function(){var u=(f.status+"")[0];"0"===u||"2"===u||"3"===u?b(f.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+f.status+".")},f.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete d[t],e.load())},y(f)}},y=function(e){try{e.send()}catch{e.onerror()}},b=function(e,t){var a=function(){t._emit("loaderror",null,"Decoding audio data failed.")},c=function(h){h&&t._sounds.length>0?(d[t._src]=h,g(t,h)):a()};typeof Promise<"u"&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(e).then(c).catch(a):r.ctx.decodeAudioData(e,c,a)},g=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},S=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),t=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=t?parseInt(t[1],10):null;if(e&&a&&a<9){var c=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!c&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};n.Howler=r,n.Howl=s,typeof D<"u"?(D.HowlerGlobal=i,D.Howler=r,D.Howl=s,D.Sound=l):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=r,window.Howl=s,window.Sound=l)}(),function(){var r;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var l=s._howls.length-1;l>=0;l--)s._howls[l].stereo(r);return s},HowlerGlobal.prototype.pos=function(r,s,l){var d=this;return d.ctx&&d.ctx.listener?"number"!=typeof r?d._pos:(d._pos=[r,s="number"!=typeof s?d._pos[1]:s,l="number"!=typeof l?d._pos[2]:l],typeof d.ctx.listener.positionX<"u"?(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,.1)):d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]),d):d},HowlerGlobal.prototype.orientation=function(r,s,l,d,p,y){var b=this;if(!b.ctx||!b.ctx.listener)return b;var g=b._orientation;return"number"!=typeof r?g:(b._orientation=[r,s="number"!=typeof s?g[1]:s,l="number"!=typeof l?g[2]:l,d="number"!=typeof d?g[3]:d,p="number"!=typeof p?g[4]:p,y="number"!=typeof y?g[5]:y],typeof b.ctx.listener.forwardX<"u"?(b.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),b.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),b.ctx.listener.forwardZ.setTargetAtTime(l,Howler.ctx.currentTime,.1),b.ctx.listener.upX.setTargetAtTime(d,Howler.ctx.currentTime,.1),b.ctx.listener.upY.setTargetAtTime(p,Howler.ctx.currentTime,.1),b.ctx.listener.upZ.setTargetAtTime(y,Howler.ctx.currentTime,.1)):b.ctx.listener.setOrientation(r,s,l,d,p,y),b)},Howl.prototype.init=(r=Howl.prototype.init,function(s){var l=this;return l._orientation=s.orientation||[1,0,0],l._stereo=s.stereo||null,l._pos=s.pos||null,l._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},l._onstereo=s.onstereo?[{fn:s.onstereo}]:[],l._onpos=s.onpos?[{fn:s.onpos}]:[],l._onorientation=s.onorientation?[{fn:s.onorientation}]:[],r.call(this,s)}),Howl.prototype.stereo=function(r,s){var l=this;if(!l._webAudio)return l;if("loaded"!==l._state)return l._queue.push({event:"stereo",action:function(){l.stereo(r,s)}}),l;var d=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u"){if("number"!=typeof r)return l._stereo;l._stereo=r,l._pos=[r,0,0]}for(var p=l._getSoundIds(s),y=0;y<p.length;y++){var b=l._soundById(p[y]);if(b){if("number"!=typeof r)return b._stereo;b._stereo=r,b._pos=[r,0,0],b._node&&(b._pannerAttr.panningModel="equalpower",(!b._panner||!b._panner.pan)&&i(b,d),"spatial"===d?typeof b._panner.positionX<"u"?(b._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),b._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),b._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):b._panner.setPosition(r,0,0):b._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),l._emit("stereo",b._id)}}return l},Howl.prototype.pos=function(r,s,l,d){var p=this;if(!p._webAudio)return p;if("loaded"!==p._state)return p._queue.push({event:"pos",action:function(){p.pos(r,s,l,d)}}),p;if(s="number"!=typeof s?0:s,l="number"!=typeof l?-.5:l,typeof d>"u"){if("number"!=typeof r)return p._pos;p._pos=[r,s,l]}for(var y=p._getSoundIds(d),b=0;b<y.length;b++){var g=p._soundById(y[b]);if(g){if("number"!=typeof r)return g._pos;g._pos=[r,s,l],g._node&&((!g._panner||g._panner.pan)&&i(g,"spatial"),typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(l,Howler.ctx.currentTime)):g._panner.setPosition(r,s,l)),p._emit("pos",g._id)}}return p},Howl.prototype.orientation=function(r,s,l,d){var p=this;if(!p._webAudio)return p;if("loaded"!==p._state)return p._queue.push({event:"orientation",action:function(){p.orientation(r,s,l,d)}}),p;if(s="number"!=typeof s?p._orientation[1]:s,l="number"!=typeof l?p._orientation[2]:l,typeof d>"u"){if("number"!=typeof r)return p._orientation;p._orientation=[r,s,l]}for(var y=p._getSoundIds(d),b=0;b<y.length;b++){var g=p._soundById(y[b]);if(g){if("number"!=typeof r)return g._orientation;g._orientation=[r,s,l],g._node&&(g._panner||(g._pos||(g._pos=p._pos||[0,0,-.5]),i(g,"spatial")),typeof g._panner.orientationX<"u"?(g._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(l,Howler.ctx.currentTime)):g._panner.setOrientation(r,s,l)),p._emit("orientation",g._id)}}return p},Howl.prototype.pannerAttr=function(){var l,d,p,r=this,s=arguments;if(!r._webAudio)return r;if(0===s.length)return r._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(p=r._soundById(parseInt(s[0],10)))?p._pannerAttr:r._pannerAttr;l=s[0],typeof d>"u"&&(l.pannerAttr||(l.pannerAttr={coneInnerAngle:l.coneInnerAngle,coneOuterAngle:l.coneOuterAngle,coneOuterGain:l.coneOuterGain,distanceModel:l.distanceModel,maxDistance:l.maxDistance,refDistance:l.refDistance,rolloffFactor:l.rolloffFactor,panningModel:l.panningModel}),r._pannerAttr={coneInnerAngle:typeof l.pannerAttr.coneInnerAngle<"u"?l.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof l.pannerAttr.coneOuterAngle<"u"?l.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof l.pannerAttr.coneOuterGain<"u"?l.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof l.pannerAttr.distanceModel<"u"?l.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof l.pannerAttr.maxDistance<"u"?l.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof l.pannerAttr.refDistance<"u"?l.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof l.pannerAttr.rolloffFactor<"u"?l.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof l.pannerAttr.panningModel<"u"?l.pannerAttr.panningModel:r._panningModel})}else 2===s.length&&(l=s[0],d=parseInt(s[1],10));for(var y=r._getSoundIds(d),b=0;b<y.length;b++)if(p=r._soundById(y[b])){var g=p._pannerAttr;g={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:g.coneOuterGain,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:g.distanceModel,maxDistance:typeof l.maxDistance<"u"?l.maxDistance:g.maxDistance,refDistance:typeof l.refDistance<"u"?l.refDistance:g.refDistance,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:g.rolloffFactor,panningModel:typeof l.panningModel<"u"?l.panningModel:g.panningModel};var S=p._panner;S?(S.coneInnerAngle=g.coneInnerAngle,S.coneOuterAngle=g.coneOuterAngle,S.coneOuterGain=g.coneOuterGain,S.distanceModel=g.distanceModel,S.maxDistance=g.maxDistance,S.refDistance=g.refDistance,S.rolloffFactor=g.rolloffFactor,S.panningModel=g.panningModel):(p._pos||(p._pos=r._pos||[0,0,-.5]),i(p,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var s=this,l=s._parent;s._orientation=l._orientation,s._stereo=l._stereo,s._pos=l._pos,s._pannerAttr=l._pannerAttr,r.call(this),s._stereo?l.stereo(s._stereo):s._pos&&l.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var s=this,l=s._parent;return s._orientation=l._orientation,s._stereo=l._stereo,s._pos=l._pos,s._pannerAttr=l._pannerAttr,s._stereo?l.stereo(s._stereo):s._pos?l.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,l._refreshBuffer(s)),r.call(this)}}(Sound.prototype.reset);var i=function(r,s){"spatial"===(s=s||"spatial")?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()});function G(o){return"function"==typeof o}let j=!1;const T={Promise:void 0,set useDeprecatedSynchronousErrorHandling(o){if(o){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else j&&console.log("RxJS: Back to a better error behavior. Thank you. <3");j=o},get useDeprecatedSynchronousErrorHandling(){return j}};function R(o){setTimeout(()=>{throw o},0)}const M={closed:!0,next(o){},error(o){if(T.useDeprecatedSynchronousErrorHandling)throw o;R(o)},complete(){}},ce=Array.isArray||(o=>o&&"number"==typeof o.length),U=(()=>{function o(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return o.prototype=Object.create(Error.prototype),o})();class x{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:i,_ctorUnsubscribe:r,_unsubscribe:s,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof x)i.remove(this);else if(null!==i)for(let d=0;d<i.length;++d)i[d].remove(this);if(G(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(d){n=d instanceof U?Q(d.errors):[d]}}if(ce(l)){let d=-1,p=l.length;for(;++d<p;){const y=l[d];if(null!==(o=y)&&"object"==typeof o)try{y.unsubscribe()}catch(b){n=n||[],b instanceof U?n=n.concat(Q(b.errors)):n.push(b)}}}var o;if(n)throw new U(n)}add(n){let i=n;if(!n)return x.EMPTY;switch(typeof n){case"function":i=new x(n);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof x)){const l=i;i=new x,i._subscriptions=[l]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:r}=i;if(null===r)i._parentOrParents=this;else if(r instanceof x){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i}remove(n){const i=this._subscriptions;if(i){const r=i.indexOf(n);-1!==r&&i.splice(r,1)}}}var o;function Q(o){return o.reduce((n,i)=>n.concat(i instanceof U?i.errors:i),[])}x.EMPTY=((o=new x).closed=!0,o);const H="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class k extends x{constructor(n,i,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=M;break;case 1:if(!n){this.destination=M;break}if("object"==typeof n){n instanceof k?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new K(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new K(this,n,i,r)}}[H](){return this}static create(n,i,r){const s=new k(n,i,r);return s.syncErrorThrowable=!1,s}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class K extends k{constructor(n,i,r,s){super(),this._parentSubscriber=n;let l,d=this;G(i)?l=i:i&&(l=i.next,r=i.error,s=i.complete,i!==M&&(d=Object.create(i),G(d.unsubscribe)&&this.add(d.unsubscribe.bind(d)),d.unsubscribe=this.unsubscribe.bind(this))),this._context=d,this._next=l,this._error=r,this._complete=s}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:i}=this;T.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?this.__tryOrSetError(i,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:i}=this,{useDeprecatedSynchronousErrorHandling:r}=T;if(this._error)r&&i.syncErrorThrowable?(this.__tryOrSetError(i,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(i.syncErrorThrowable)r?(i.syncErrorValue=n,i.syncErrorThrown=!0):R(n),this.unsubscribe();else{if(this.unsubscribe(),r)throw n;R(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const i=()=>this._complete.call(this._context);T.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,i){try{n.call(this._context,i)}catch(r){if(this.unsubscribe(),T.useDeprecatedSynchronousErrorHandling)throw r;R(r)}}__tryOrSetError(n,i,r){if(!T.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this._context,r)}catch(s){return T.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=s,n.syncErrorThrown=!0,!0):(R(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const fe="function"==typeof Symbol&&Symbol.observable||"@@observable";function _e(o){return o}let z=(()=>{class o{constructor(i){this._isScalar=!1,i&&(this._subscribe=i)}lift(i){const r=new o;return r.source=this,r.operator=i,r}subscribe(i,r,s){const{operator:l}=this,d=function he(o,n,i){if(o){if(o instanceof k)return o;if(o[H])return o[H]()}return o||n||i?new k(o,n,i):new k(M)}(i,r,s);if(d.add(l?l.call(d,this.source):this.source||T.useDeprecatedSynchronousErrorHandling&&!d.syncErrorThrowable?this._subscribe(d):this._trySubscribe(d)),T.useDeprecatedSynchronousErrorHandling&&d.syncErrorThrowable&&(d.syncErrorThrowable=!1,d.syncErrorThrown))throw d.syncErrorValue;return d}_trySubscribe(i){try{return this._subscribe(i)}catch(r){T.useDeprecatedSynchronousErrorHandling&&(i.syncErrorThrown=!0,i.syncErrorValue=r),function de(o){for(;o;){const{closed:n,destination:i,isStopped:r}=o;if(n||r)return!1;o=i&&i instanceof k?i:null}return!0}(i)?i.error(r):console.warn(r)}}forEach(i,r){return new(r=J(r))((s,l)=>{let d;d=this.subscribe(p=>{try{i(p)}catch(y){l(y),d&&d.unsubscribe()}},l,s)})}_subscribe(i){const{source:r}=this;return r&&r.subscribe(i)}[fe](){return this}pipe(...i){return 0===i.length?this:function pe(o){return 0===o.length?_e:1===o.length?o[0]:function(i){return o.reduce((r,s)=>s(r),i)}}(i)(this)}toPromise(i){return new(i=J(i))((r,s)=>{let l;this.subscribe(d=>l=d,d=>s(d),()=>r(l))})}}return o.create=n=>new o(n),o})();function J(o){if(o||(o=Promise),!o)throw new Error("no Promise impl found");return o}class me{constructor(n,i){this.compare=n,this.keySelector=i}call(n,i){return i.subscribe(new be(n,this.compare,this.keySelector))}}class be extends k{constructor(n,i,r){super(n),this.keySelector=r,this.hasKey=!1,"function"==typeof i&&(this.compare=i)}compare(n,i){return n===i}_next(n){let i;try{const{keySelector:s}=this;i=s?s(n):n}catch(s){return this.destination.error(s)}let r=!1;if(this.hasKey)try{const{compare:s}=this;r=s(this.key,i)}catch(s){return this.destination.error(s)}else this.hasKey=!0;r||(this.key=i,this.destination.next(n))}}const L=(()=>{function o(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return o.prototype=Object.create(Error.prototype),o})();class ye extends x{constructor(n,i){super(),this.subject=n,this.subscriber=i,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,i=n.observers;if(this.subject=null,!i||0===i.length||n.isStopped||n.closed)return;const r=i.indexOf(this.subscriber);-1!==r&&i.splice(r,1)}}class ve extends k{constructor(n){super(n),this.destination=n}}let V=(()=>{class o extends z{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[H](){return new ve(this)}lift(i){const r=new ee(this,this);return r.operator=i,r}next(i){if(this.closed)throw new L;if(!this.isStopped){const{observers:r}=this,s=r.length,l=r.slice();for(let d=0;d<s;d++)l[d].next(i)}}error(i){if(this.closed)throw new L;this.hasError=!0,this.thrownError=i,this.isStopped=!0;const{observers:r}=this,s=r.length,l=r.slice();for(let d=0;d<s;d++)l[d].error(i);this.observers.length=0}complete(){if(this.closed)throw new L;this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let l=0;l<r;l++)s[l].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(i){if(this.closed)throw new L;return super._trySubscribe(i)}_subscribe(i){if(this.closed)throw new L;return this.hasError?(i.error(this.thrownError),x.EMPTY):this.isStopped?(i.complete(),x.EMPTY):(this.observers.push(i),new ye(this,i))}asObservable(){const i=new z;return i.source=this,i}}return o.create=(n,i)=>new ee(n,i),o})();class ee extends V{constructor(n,i){super(),this.destination=n,this.source=i}next(n){const{destination:i}=this;i&&i.next&&i.next(n)}error(n){const{destination:i}=this;i&&i.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:i}=this;return i?this.source.subscribe(n):x.EMPTY}}class we extends V{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const i=super._subscribe(n);return i&&!i.closed&&n.next(this._value),i}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new L;return this._value}next(n){super.next(this._value=n)}}function W(){return W=(0,I.Z)(function*(o){let n=yield fetch(o);if(!n.ok)return console.log(`fetch(${o}) failed with status ${n.status}`),null;let i=yield n.text(),s=(new DOMParser).parseFromString(i,"text/xml");return Array.from(s.querySelectorAll("div[type=page]")).map(d=>{let p=d.querySelector("graphic[url]"),y=d.querySelectorAll("p"),b={id:d.getAttribute("id"),paragraphs:Array.from(y)};return null!==p&&(b.img=p.getAttribute("url")),d.attributes&&(b.attributes=d.attributes),b})}),W.apply(this,arguments)}var te=function(o){var n=this;n.sounds=[],n._sprite=o.sprite,n._reading$=new V,n._tinySprite=Object.keys(o.sprite).map(i=>[n._sprite[i][0],i]),n._tinySprite.pop(),n._percentPlayed=new we("0%"),n.sound=new Z.Howl({src:o.src,sprite:o.sprite,rate:o.rate}),requestAnimationFrame(n.step.bind(n))};function Se(o){return $.apply(this,arguments)}function $(){return $=(0,I.Z)(function*(o){return new Promise(function(n,i){let r=new XMLHttpRequest;r.open("HEAD",o),r.onload=function(){n(this.status>=200&&this.status<300)},r.onerror=function(){n(!1)},r.send()})}),$.apply(this,arguments)}te.prototype={play:function(o){var n=this;return n._spriteLeft=n._tinySprite,n.sound.play(o)},pause:function(){return this.sound.pause(),this.sound.id},goBack:function(o,n){var i=this;if(i._spriteLeft=i._tinySprite,i.sound.seek(o)-n>0){o=i.sound.seek(i.sound.seek(o)-n,o);for(var r=i.sound.seek(o),s=0;s<i._spriteLeft.length;s++)1e3*r>=i._spriteLeft[s][0]&&(i._reading$.next(i._spriteLeft[s][1]),i._spriteLeft=i._spriteLeft.slice(s,i._spriteLeft.length))}else o=i.sound.seek(0,o),i._reading$.next(i._spriteLeft[0][1]);return o},goTo:function(r,n){var i=this;i._spriteLeft=i._tinySprite,r=i.sound.seek(n,r);for(var s=i.sound.seek(r),l=0;l<i._spriteLeft.length;l++)1e3*s>=i._spriteLeft[l][0]&&(i._reading$.next(i._spriteLeft[l][1]),i._spriteLeft=i._spriteLeft.slice(l,i._spriteLeft.length));return r},stop:function(){return this._reading$.next(""),this.sound.stop()},step:function(){for(var o=this,n=0;n<o.sounds.length;n++){for(var i=o.sound.seek()||0,r=0;r<o._spriteLeft.length;r++)i>0&&1e3*i>=o._spriteLeft[r][0]&&(o._reading$.next(o._spriteLeft[r][1]),o._spriteLeft=o._spriteLeft.slice(r,o._spriteLeft.length));let s=(i/o.sound.duration()*100||0)+"%";o.sounds[n].style.width=s,o.sounds[n].setAttribute("offset",s)}requestAnimationFrame(o.step.bind(o))}};const Te={page:"Page",speed:"Playback Speed","re-align":"Re-align with audio","loading-error":'Error: the <FILETYPE> file "<FILENAME>" could not be loaded.',"parse-error":'Error: the <FILETYPE> file "<FILENAME>" could not be parsed.',"alignment-error":"Error: No alignments were found.",loading:"Loading...","line-placeholder":"Type your text here","upload-image":"Upload an image for this page","choose-file":"Choose a file","play-tooltip":"Play audio recording","rewind-tooltip":"Rewind 5 seconds","stop-tooltip":"Stop audio playback","theme-tooltip":"Change theme","full-screen-tooltip":"Full screen mode","translation-tooltip":"Toggle translations","add-translation":"Add a translation, transliteration or gloss"},ke={page:"Page",speed:"Vitesse de Lecture","re-align":"R\xe9aligner avec l'audio","loading-error":'Erreur: le fichier <FILETYPE> "<FILENAME>" n\'a pas pu \xeatre charg\xe9.',"parse-error":'Erreur: le fichier <FILETYPE> "<FILENAME>" n\'a pas pu \xeatre analys\xe9.',"alignment-error":"Erreur: aucun alignement n'a \xe9t\xe9 trouv\xe9.",loading:"Chargement en cours","line-placeholder":"\xc9crivez votre texte ici","upload-image":"T\xe9l\xe9verser charger une image pour cette page","choose-file":"Choisir un fichier","play-tooltip":"\xc9couter l'enregistrement","rewind-tooltip":"Reculer de 5 secondes","stop-tooltip":"Arr\xeater la lecture","theme-tooltip":"Changer de th\xeame visuel","full-screen-tooltip":"Mode plein \xe9cran","translation-tooltip":"Afficher ou cacher les traductions","add-translation":"Ajouter une traduction, une translit\xe9ration ou une glose"},Ee={page:"P\xe1gina",speed:"Velocidad de reproducci\xf3n","re-align":"Re-alinear con el audio","loading-error":'Error: el fichero <FILETYPE> "<FILENAME>" no se pudo cargar.',"parse-error":'Error: el fichero <FILETYPE> "<FILENAME>" no se pudo analizar.',"alignment-error":"Error: No se encontr\xf3 ning\xfan alineamiento.",loading:"Cargando...","line-placeholder":"Escriba su texto aqu\xed","upload-image":"Cargue una imagen para esta p\xe1gina","choose-file":"Seleccione un fichero","play-tooltip":"D\xe9le play a su grabaci\xf3n de audio","rewind-tooltip":"Rebobine (rewind) 5 segundos","stop-tooltip":"Pare la reproducci\xf3n de audio","theme-tooltip":"Cambie la paleta de colores","full-screen-tooltip":"Modo pantalla completa","translation-tooltip":"Active o desactive las traducciones","add-translation":"A\xf1ada una traducci\xf3n, transliteraci\xf3n o glosa"},P=class{constructor(o){(0,_.r)(this,o),this.i18nStrings={eng:Te,fra:ke,spa:Ee},this.playback_rate=1,this.showGuide=!1,this.hasTextTranslations=!1,this.assetsStatus={AUDIO:0,RAS:0},this.alignment_failed=!1,this.isScrolling=!1,this.scrollTimer=null,this.Guide=()=>(0,_.h)("button",{class:"scroll-guide__container ripple ui-button theme--"+this.theme,onClick:()=>this.hideGuideAndScroll()},(0,_.h)("span",{class:"scroll-guide__text theme--"+this.theme},this.getI18nString("re-align"))),this.Overlay=()=>(0,_.h)("object",{onClick:n=>this.goToSeekFromProgress(n),id:"overlay__object",type:"image/svg+xml",data:this.svgOverlay}),this.RemoveImg=n=>(0,_.h)("button",{"data-cy":"delete-button","aria-label":"Delete",title:"Delete image",onClick:()=>this.deleteImage(n.pageIndex),id:"img-remover",class:"ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"delete")),this.Img=n=>(0,_.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,_.h)("img",{alt:"image",class:"image",src:n.imgURL})),this.ImgPlaceHolder=n=>(0,_.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,_.h)("div",{class:"drop-area"},(0,_.h)("form",{class:"my-form"},(0,_.h)("p",{class:"theme--"+this.theme},this.getI18nString("upload-image")),(0,_.h)("input",{type:"file",class:"fileElem",id:"fileElem--"+n.pageID,accept:"image/*",onChange:i=>this.handleFiles(i.target.files[0],n.pageIndex)}),(0,_.h)("label",{class:"button",htmlFor:"fileElem--"+n.pageID},this.getI18nString("choose-file"))))),this.PageCount=n=>(0,_.h)("div",{class:"page__counter color--"+this.theme},this.getI18nString("page")," ",(0,_.h)("span",{"data-cy":"page-count__current"},n.currentPage)," / ",(0,_.h)("span",{"data-cy":"page-count__total"},n.pgCount)),this.ImgContainer=n=>(0,_.h)("div",{class:"image__container"},(0,_.h)("span",{id:"image-container"},"EDIT"===this.mode&&n.pageIndex in this.images&&null!==this.images[n.pageIndex]?(0,_.h)(this.RemoveImg,{pageIndex:n.pageIndex}):null,n.pageIndex in this.images&&null!==this.images[n.pageIndex]?(0,_.h)(this.Img,{imgURL:this.images[n.pageIndex]}):null),"EDIT"!==this.mode||n.pageIndex in this.images&&null!==this.images[n.pageIndex]?null:(0,_.h)(this.ImgPlaceHolder,{pageID:n.pageID,pageIndex:n.pageIndex})),this.Page=n=>(0,_.h)("div",{class:"page page__container page--multi animate-transition  theme--"+this.theme+" "+(n.pageData.attributes.class?n.pageData.attributes.class.value:""),id:n.pageData.id},this.parsed_text.length>1?(0,_.h)(this.PageCount,{pgCount:this.parsed_text.length,currentPage:this.parsed_text.indexOf(n.pageData)+1}):null,(0,_.h)(this.ImgContainer,{pageID:n.pageData.id,pageIndex:this.parsed_text.indexOf(n.pageData)}),(0,_.h)("div",{class:"page__col__text paragraph__container theme--"+this.theme},n.pageData.paragraphs.map(i=>(0,_.h)(this.Paragraph,{sentences:Array.from(i.childNodes),attributes:i.attributes})))),this.Paragraph=n=>(0,_.h)("div",{class:"paragraph sentence__container theme--"+this.theme+" "+(n.attributes.class?n.attributes.class.value:"")},n.sentences.map(i=>i.childNodes.length>0&&(0,_.h)(this.Sentence,{sentenceData:i}))),this.Sentence=n=>{let i=Array.from(n.sentenceData.childNodes),r=n.sentenceData.id;!this.hasTextTranslations&&n.sentenceData.hasAttribute("class")&&(this.hasTextTranslations=/translation/.test(n.sentenceData.getAttribute("class")));let s={};return n.sentenceData.hasAttribute("xml:lang")&&(s.lang=n.sentenceData.getAttribute("xml:lang")),n.sentenceData.hasAttribute("lang")&&(s.lang=n.sentenceData.getAttribute("lang")),(0,_.h)("div",Object.assign({},s,{class:"sentence "+(n.sentenceData.hasAttribute("class")?n.sentenceData.getAttribute("class"):"")}),i.map((l,d)=>{if("#text"===l.nodeName)return(0,_.h)(this.NonWordText,{text:l.textContent,attributes:l.attributes,id:(n.sentenceData.hasAttribute("id")?n.sentenceData.getAttribute("id"):"P")+"text"+d});if("w"===l.nodeName)return(0,_.h)(this.Word,{text:l.textContent,id:l.id,attributes:l.attributes});if(l){let p={};return l.hasAttribute("xml:lang")&&(p.lang=n.sentenceData.getAttribute("xml:lang")),l.hasAttribute("lang")&&(p.lang=n.sentenceData.getAttribute("lang")),(0,_.h)("span",Object.assign({},p,{class:"sentence__text theme--"+this.theme+" "+l.className,id:l.id?l.id:"text_"+d}),l.textContent)}}),(()=>"EDIT"!==this.mode||/translation/.test(n.sentenceData.getAttribute("class"))?null:r in this.translations&&r in this.translations&&null!==this.translations[r]?(0,_.h)("span",{class:"sentence__translation"},(0,_.h)("button",{title:"Remove translation","aria-label":"Remove translation","data-cy":"remove-translation-button",onClick:()=>this.removeLine(n.sentenceData),class:"sentence__translation__button remove"},(0,_.h)("i",{class:"material-icons"},"remove")),(0,_.h)("p",{id:r+"translation","data-cy":"translation-line",class:"sentence__text editable__translation",onInput:l=>{this.updateTranslation(r,l.currentTarget.innerText)},contentEditable:!0,onKeyDown:l=>{"Enter"==l.key&&l.preventDefault()},"data-placeholder":this.getI18nString("line-placeholder")})):(0,_.h)("button",{title:this.getI18nString("add-translation"),"aria-label":"Add translation","data-cy":"add-translation-button",class:"sentence__translation sentence__translation__button",onClick:()=>this.addLine(n.sentenceData)},(0,_.h)("i",{class:"material-icons"},"add")))())},this.NonWordText=n=>{let i={};return n.attributes&&n.attributes["xml:lang"]&&(i.lang=n.attributes["xml:lang"].value),n.attributes&&n.attributes.lang&&(i.lang=n.attributes.lang.value),(0,_.h)("span",Object.assign({},i,{class:"sentence__text theme--"+this.theme,id:n.id}),n.text)},this.Word=n=>{let i={};return n.attributes&&n.attributes["xml:lang"]&&(i.lang=n.attributes["xml:lang"].value),n.attributes&&n.attributes.lang&&(i.lang=n.attributes.lang.value),(0,_.h)("span",Object.assign({},i,{class:"sentence__word theme--"+this.theme+" "+(n&&n.attributes.class?n.attributes.class.value:""),id:n.id,onClick:r=>this.playSprite(r)}),n.text)},this.PlayControl=()=>(0,_.h)("button",{"data-cy":"play-button",disabled:this.hasLoaded<2,"aria-label":"Play",title:this.getI18nString("play-tooltip"),onClick:()=>{this.playing?this.pause():this.play()},class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},this.playing?"pause":"play_arrow")),this.ReplayControl=()=>(0,_.h)("button",{"data-cy":"replay-button",disabled:this.hasLoaded<2,"aria-label":"Rewind",title:this.getI18nString("rewind-tooltip"),onClick:()=>this.goBack(5),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"replay_5")),this.StopControl=()=>(0,_.h)("button",{"data-cy":"stop-button",disabled:this.hasLoaded<2,"aria-label":"Stop",title:this.getI18nString("stop-tooltip"),onClick:()=>this.stop(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons"},"stop")),this.PlaybackSpeedControl=()=>(0,_.h)("div",null,(0,_.h)("h5",{class:"control-panel__buttons__header color--"+this.theme},this.getI18nString("speed")),(0,_.h)("input",{type:"range",min:100-this.playbackRateRange,max:100+this.playbackRateRange,value:100*this.playback_rate,class:"slider control-panel__control",id:"myRange",onInput:n=>{console.log("v",n),this.changePlayback(n)}})),this.StyleControl=()=>(0,_.h)("button",{"aria-label":"Change theme",onClick:()=>this.changeTheme(),title:this.getI18nString("theme-tooltip"),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons-outlined"},"style")),this.FullScreenControl=()=>(0,_.h)("button",{"aria-label":"Full screen mode",onClick:()=>this.toggleFullscreen(),title:this.getI18nString("full-screen-tooltip"),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons","aria-label":"Full screen mode"},this.fullscreen?"fullscreen_exit":"fullscreen")),this.TextTranslationDisplayControl=()=>(0,_.h)("button",{"data-cy":"translation-toggle","aria-label":"Toggle Translation",title:this.getI18nString("translation-tooltip"),onClick:()=>this.toggleTextTranslation(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,_.h)("i",{class:"material-icons-outlined"},"subtitles")),this.ErrorMessage=n=>(0,_.h)("p",{"data-cy":n.data_cy,class:"alert status-error"},(0,_.h)("span",{class:"material-icons"},"error_outline_outlined")," ",n.msg),this.ControlPanel=()=>(0,_.h)("div",{"data-cy":"control-panel",class:"control-panel theme--"+this.theme+" background--"+this.theme},(0,_.h)("div",{class:"control-panel__buttons--left"},(0,_.h)(this.PlayControl,null),(0,_.h)(this.ReplayControl,null),(0,_.h)(this.StopControl,null)),(0,_.h)("div",{class:"control-panel__buttons--center"},(0,_.h)(this.PlaybackSpeedControl,null)),(0,_.h)("div",{class:"control-panel__buttons--right"},this.hasTextTranslations&&(0,_.h)(this.TextTranslationDisplayControl,null),(0,_.h)(this.StyleControl,null),(0,_.h)(this.FullScreenControl,null))),this.href=void 0,this.audio=void 0,this.svgOverlay=void 0,this.theme="light",this.language="eng",this.cssUrl=void 0,this.useAssetsFolder=!0,this.pageScrolling="horizontal",this.mode="VIEW",this.scrollBehaviour="smooth",this.displayTranslation=!0,this.playbackRateRange=15,this.playing=!1,this.fullscreen=!1,this.autoScroll=!0,this.hasLoaded=0,this.images=void 0,this.translations=void 0}handleScrollEvent(){this.isScrolling=!0,this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{this.isScrolling=!1},125)}wheelHandler(o){if(this.el.shadowRoot.querySelector(".reading")&&(o.path[0].classList.contains("sentence__word")||o.path[0].classList.contains("sentence__container")||o.path[0].classList.contains("sentence"))&&this.autoScroll){let n=this.el.shadowRoot.querySelector(".reading");n&&(this.autoScroll=!this.inPageContentOverflow(n),this.showGuide=!this.autoScroll)}}urlTransform(o){return this.useAssetsFolder&&function n(i){return!/^(https?:[/][/]|assets[/]|data:)/.test(i)}(o)&&!o.startsWith("blob")?"assets/"+o:o}buildSprite(o,n){return new te({src:[o],sprite:n,rate:this.playback_rate})}tagToQuery(o){return"#"+(o=o.replace(".","\\.")).replace("#","\\#")}returnWordClosestTo(o){let n=Object.keys(this.processed_alignment);n.pop();for(let i=1;i<n.length;i++)if(1e3*o>this.processed_alignment[n[i]][0]&&this.processed_alignment[n[i+1]]&&1e3*o<this.processed_alignment[n[i+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(n[i]))}getPathFromAssetType(o){return"AUDIO"===o?this.audio:"RAS"===o?this.href:"Asset Path Not Supported"}changePlayback(o){this.playback_rate=parseInt(o.currentTarget.value)/100,this.audio_howl_sprites.sound.rate(this.playback_rate)}goBack(o){this.autoScroll=!1,this.play_id&&this.audio_howl_sprites.goBack(this.play_id,o),setTimeout(()=>this.autoScroll=!0,100)}goTo(o){void 0===this.play_id&&(this.play(),this.pause()),this.autoScroll=!1,this.audio_howl_sprites.goTo(this.play_id,o/=1e3),setTimeout(()=>this.autoScroll=!0,100)}goToSeekAtEl(o){let i=o.currentTarget.id;return this.goTo(this.processed_alignment[i][0]),i}goToSeekFromProgress(o){let i=o.currentTarget.getBoundingClientRect();this.goTo((o.pageX-i.left)/i.width*this.duration*1e3)}pause(){this.playing=!1,this.audio_howl_sprites.pause()}play(){this.playing=!0,this.play_id=this.audio_howl_sprites.play(void 0!==this.play_id?this.play_id:"all"),this.animateProgress()}playSprite(o){let n=this.goToSeekAtEl(o);this.playing||this.audio_howl_sprites.play(n)}stop(){this.playing=!1,this.audio_howl_sprites.stop(),this.el.shadowRoot.querySelectorAll(".reading").forEach(o=>o.classList.remove("reading")),this.autoScroll||(this.autoScroll=!0,this.showGuide=!1)}toggleTextTranslation(){this.el.shadowRoot.querySelectorAll(".translation").forEach(o=>o.classList.toggle("invisible")),this.el.shadowRoot.querySelectorAll(".sentence__translation").forEach(o=>o.classList.toggle("invisible"))}addHighlightingTo(o){this.el.shadowRoot.querySelectorAll(".reading").forEach(n=>n.classList.remove("reading")),o.classList.add("reading")}animateProgressWithOverlay(){let o=this.el.shadowRoot.querySelector("#overlay__object"),n=o.contentDocument.querySelector("#progress-fill"),i=o.contentDocument.querySelector("#progress-trail"),r=o.contentDocument.querySelector("#progress-base");n.classList.add("stop-color--"+this.theme),r.classList.add("stop-color--"+this.theme),this.audio_howl_sprites.sounds.push(n),this.audio_howl_sprites.sounds.push(i),this.audio_howl_sprites.sound.once("end",()=>{this.audio_howl_sprites.sounds.forEach(s=>{s.setAttribute("offset","0%")}),this.el.shadowRoot.querySelectorAll(".reading").forEach(s=>s.classList.remove("reading")),this.playing=!1},this.play_id)}animateProgressDefault(o,n){let i=document.createElement("div");i.className="progress theme--"+this.theme,i.id=o.toString(),i.dataset.sprite=n;let r=this.tagToQuery(n);this.el.shadowRoot.querySelector(r).appendChild(i),this.audio_howl_sprites.sounds.push(i),this.audio_howl_sprites.sound.once("end",()=>{this.el.shadowRoot.querySelectorAll(".reading").forEach(s=>s.classList.remove("reading")),this.playing=!1},this.play_id)}animateProgress(o=this.play_id){this.svgOverlay?this.animateProgressWithOverlay():this.animateProgressDefault(o,"all")}changeFill(){let o=this.el.shadowRoot.querySelector(".sentence__word"),n=window.getComputedStyle(o).color,i=this.el.shadowRoot.querySelector("#overlay__object"),r=i.contentDocument.querySelector("#progress-fill"),s=i.contentDocument.querySelector("#progress-base");i.contentDocument.querySelector("#polygon").setAttribute("stroke",n),s.setAttribute("stop-color",n),r.setAttribute("stop-color",n)}getImages(){var o=this;return(0,I.Z)(function*(){return o.images})()}getTranslations(){var o=this;return(0,I.Z)(function*(){return o.translations})()}changeTheme(){var o=this;return(0,I.Z)(function*(){o.theme="light"===o.theme?"dark":"light"})()}static _getSentenceContainerOfWord(o){return o.parentElement.parentElement.parentElement}toggleFullscreen(){if(this.fullscreen){let o=this.el.ownerDocument;o.exitFullscreen?o.exitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.msExitFullscreen&&o.msExitFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.remove("read-along-container--fullscreen")}else{let o=this.el.shadowRoot.getElementById("read-along-container");o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.add("read-along-container--fullscreen")}this.fullscreen=!this.fullscreen}hideGuideAndScroll(){let o=this.el.shadowRoot.querySelector(".reading"),n=new IntersectionObserver(i=>{let[r]=i;r.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),n.unobserve(o))});n.observe(o),this.scrollTo(o)}inParagraphContentOverflow(o){let i=P._getSentenceContainerOfWord(o).getBoundingClientRect(),r=o.getBoundingClientRect(),s=r.right<i.left,l=r.right>i.right,d=new IntersectionObserver(p=>{let[y]=p;y.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),d.unobserve(o))});return d.observe(o),s||l}inPageContentOverflow(o){let i=this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect(),r=o.getBoundingClientRect(),s=r.top+r.height>i.top+i.height,l=r.top+r.height<0,d=new IntersectionObserver(p=>{let[y]=p;y.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),d.unobserve(o))});return d.observe(o),l||s}inPage(o){let i=P._getSentenceContainerOfWord(o).getBoundingClientRect(),r=o.getBoundingClientRect(),s=r.top+r.height>i.top+i.height,l=r.top+r.height<0,d=new IntersectionObserver(p=>{let[y]=p;y.isIntersecting&&(setTimeout(()=>{this.showGuide=!1,this.autoScroll=!0},100),d.unobserve(o))});return d.observe(o),l||s}scrollToPage(o){let n=this.el.shadowRoot.querySelector(".pages__container"),i=this.el.shadowRoot.querySelector("#"+o);n.scrollBy({top:null!=this.pageScrolling.match("vertical")?i.offsetTop-n.scrollTop:0,left:null!=this.pageScrolling.match("vertical")?0:i.offsetLeft-n.scrollLeft,behavior:this.scrollBehaviour}),i.scrollTo(0,0)}scrollByHeight(o){let n=P._getSentenceContainerOfWord(o),i=o.parentElement.getBoundingClientRect(),r=new IntersectionObserver(s=>{let[l]=s;l.isIntersecting?r.unobserve(o):n.scrollTo({top:n.getBoundingClientRect().height-i.height,left:0,behavior:this.scrollBehaviour})},{root:n,threshold:[0,.25,.5,.75,1]});r.observe(o)}scrollByWidth(o){let n=P._getSentenceContainerOfWord(o),i=o.getBoundingClientRect();n.scrollTo({left:i.left-10,top:0,behavior:this.scrollBehaviour})}scrollTo(o){o.scrollIntoView({behavior:this.scrollBehaviour})}disconnectedCallback(){this.stop()}componentDidUpdate(){this.svgOverlay&&this.changeFill()}componentWillLoad(){var o=this;return(0,I.Z)(function*(){if(o.language.length<3&&(o.language=null!=o.language.match("fr")?"fra":null!==o.language.match("es")?"spa":"eng"),"smooth"!==o.scrollBehaviour&&"auto"!==o.scrollBehaviour&&(console.log("Invalid scroll-behaviour value, using default (smooth)"),o.scrollBehaviour="smooth"),(isNaN(o.playbackRateRange)||o.playbackRateRange<0||o.playbackRateRange>99)&&(console.log("Invalid playback-rate-range value, using default (15)."),o.playbackRateRange=15),o.parsed_text=yield function Ae(o){return W.apply(this,arguments)}(o.href),null===o.parsed_text)o.parsed_text=[],o.assetsStatus.RAS=3;else if(0===o.parsed_text.length)o.assetsStatus.RAS=2;else{o.images={},o.translations={};for(const[i,r]of o.parsed_text.entries())if("img"in r){var n=o.urlTransform(r.img);o.images[i]=o.urlTransform(r.img),/^(https?:[/]|assets)[/]\b/.test(n)&&((yield Se(n))||(o.images[i]=null))}else o.images[i]=null;o.assetsStatus.RAS=1}o.hasLoaded+=1})()}componentDidLoad(){this.processed_alignment=function xe(o){let n={};for(const i of o)for(const r of i.paragraphs)for(const s of Array.from(r.querySelectorAll("w[time][dur]"))){const l=s.getAttribute("time"),d=s.getAttribute("dur");null!==l&&null!==d&&(n[s.getAttribute("id")]=[Math.round(1e3*parseFloat(l)),Math.round(1e3*parseFloat(d))])}return n}(this.parsed_text),this.alignment_failed=0==Object.keys(this.processed_alignment).length,this.audio_howl_sprites=new Z.Howl({src:[this.audio],preload:!1}),this.audio_howl_sprites.once("load",()=>{this.processed_alignment.all=[0,1e3*this.audio_howl_sprites.duration()],this.duration=this.audio_howl_sprites.duration(),this.audio_howl_sprites=this.buildSprite(this.audio,this.processed_alignment),this.reading$=this.audio_howl_sprites._reading$.pipe(function ge(o,n){return i=>i.lift(new me(o,n))}()).subscribe(o=>{if(this.playing){let n=this.tagToQuery(o),i=this.el.shadowRoot.querySelector(n);this.el.shadowRoot.querySelectorAll(".reading").forEach(d=>d.classList.remove("reading")),i.classList.add("reading");let r=P._getSentenceContainerOfWord(i).parentElement.id;r!==this.current_page&&(void 0!==this.current_page&&!this.isScrolling&&this.scrollToPage(r),this.current_page=r);const s=Math.ceil(this.el.shadowRoot.querySelector(".pages__container").getBoundingClientRect().left)+1,l=Math.ceil(this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect().left);(i.getBoundingClientRect().left<0||l!==s)&&(this.isScrolling||this.scrollToPage(r)),this.inPageContentOverflow(i)&&this.autoScroll&&(i.scrollIntoView(!1),this.isScrolling||this.scrollByHeight(i)),this.inParagraphContentOverflow(i)&&this.autoScroll&&(i.scrollIntoView(!1),this.isScrolling||this.scrollByWidth(i))}}),this.hasLoaded+=1,this.assetsStatus.AUDIO=1}),this.audio_howl_sprites.once("loaderror",()=>{this.hasLoaded+=1,this.assetsStatus.AUDIO=3}),this.audio_howl_sprites.load()}componentDidRender(){!this.displayTranslation&&this.parsed_text&&this.parsed_text.length>0&&(this.toggleTextTranslation(),this.displayTranslation=!0),this.latestTranslation&&(this.el.shadowRoot.querySelector(this.latestTranslation).focus(),this.latestTranslation="")}getRawI18nString(o){return this.i18nStrings[this.language]&&this.i18nStrings[this.language][o]?this.i18nStrings[this.language][o]:this.i18nStrings.eng[o]?this.i18nStrings.eng[o]:o}getI18nString(o,n={}){let i=this.getRawI18nString(o);for(const[r,s]of Object.entries(n))i=i.replace("<"+r+">",s);return i}addLine(o){this.hasTextTranslations||(this.hasTextTranslations=!0);let n={};n[o.id]="",this.translations=Object.assign(Object.assign({},this.translations),n),this.latestTranslation="#"+o.id+"translation"}removeLine(o){let n={};n[o.id]=null,this.translations=Object.assign(Object.assign({},this.translations),n)}updateTranslation(o,n){this.translations[o]=n}handleFiles(o,n){var i=this;return(0,I.Z)(function*(){let r=URL.createObjectURL(o),s={};s[n]=r,i.images=Object.assign(Object.assign({},i.images),s)})()}deleteImage(o){let n={};n[o]=null,this.images=Object.assign(Object.assign({},this.images),n)}render(){return(0,_.h)("div",{id:"read-along-container",class:"read-along-container"},(0,_.h)("h1",{class:"slot__header"},(0,_.h)("slot",{name:"read-along-header"})),(0,_.h)("h3",{class:"slot__subheader"},(0,_.h)("slot",{name:"read-along-subheader"})),Object.entries(this.assetsStatus).map(o=>{let n=o[0],i=o[1];if(2===i){let r=this.getPathFromAssetType(n);return(0,_.h)(this.ErrorMessage,{msg:this.getI18nString("parse-error",{FILETYPE:n,FILENAME:r}),data_cy:n+"-error"})}if(3===i){let r=this.getPathFromAssetType(n);return(0,_.h)(this.ErrorMessage,{msg:this.getI18nString("loading-error",{FILETYPE:n,FILENAME:r}),data_cy:n+"-error"})}}),this.alignment_failed&&1===this.assetsStatus.RAS&&(0,_.h)(this.ErrorMessage,{msg:this.getI18nString("alignment-error"),data_cy:"alignment-error"}),(0,_.h)("div",{onScroll:()=>{this.handleScrollEvent()},"data-cy":"text-container",class:"pages__container theme--"+this.theme+" "+this.pageScrolling},this.showGuide?(0,_.h)(this.Guide,null):null,1==this.assetsStatus.RAS&&this.parsed_text.map(o=>(0,_.h)(this.Page,{pageData:o})),this.hasLoaded<2&&(0,_.h)("div",{class:"loader"})),this.alignment_failed||(0,_.h)("div",{onClick:o=>this.goToSeekFromProgress(o),id:"all","data-cy":"progress-bar",class:"overlay__container theme--"+this.theme+" background--"+this.theme},this.svgOverlay?(0,_.h)(this.Overlay,null):null),1==this.assetsStatus.AUDIO&&(0,_.h)(this.ControlPanel,null),this.cssUrl&&null!=this.cssUrl.match(".css")&&(0,_.h)("link",{href:this.cssUrl,rel:"stylesheet"}))}get el(){return(0,_.g)(this)}};P.style='@font-face{font-family:"Karla";font-style:normal;font-weight:400;src:local("Karla"), local("Karla-Regular"),\n    url("assets/fonts/qkBbXvYC6trAT7RbLtyU5rZPoAU.woff2") format("woff2");unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB,\n    U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:"Karla";font-style:normal;font-weight:400;src:local("Karla"), local("Karla-Regular"),\n    url("assets/fonts/qkBbXvYC6trAT7RVLtyU5rZP.woff2") format("woff2");unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,\n    U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215,\n    U+FEFF, U+FFFD}@font-face{font-family:"Lato";font-style:normal;font-weight:400;src:local("Lato Regular"), local("Lato-Regular"),\n    url("assets/fonts/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2") format("woff2");unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB,\n    U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:"Lato";font-style:normal;font-weight:400;src:local("Lato Regular"), local("Lato-Regular"),\n    url("assets/fonts/S6uyw4BMUTPHjx4wXiWtFCc.woff2") format("woff2");unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,\n    U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215,\n    U+FEFF, U+FFFD}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:url("assets/fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2")\n    format("woff2")}@font-face{font-family:"Material Icons Outlined";font-style:normal;font-weight:400;src:url("assets/fonts/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2")\n    format("woff2")}.material-icons{font-family:"Material Icons";font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.material-icons-outlined{font-family:"Material Icons Outlined";font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.font-weight--100{font-weight:100}.font-weight--200{font-weight:200}.font-weight--300{font-weight:300}.font-weight--400{font-weight:400}.font-weight--500{font-weight:500}.font-weight--600{font-weight:600}.font-weight--700{font-weight:700}.font-weight--800{font-weight:800}.font-weight--900{font-weight:900}.shadowed{text-shadow:0.3px 0.2px black}.theme--light.sentence,.theme--light.page__col__image,.theme--light.page__container,.theme--light.scroll-guide__container{background-color:#fff}.theme--dark.sentence,.theme--dark.page__col__image,.theme--dark.page__container,.theme--dark.scroll-guide__container{background-color:#3c4369}.sentence__word,.sentence__text,.scroll-guide__text{line-height:1.5;border-radius:0.3125em;position:relative;padding:0.0625em;font-size:1em}.theme--light.ripple,.theme--light.reading,.theme--light.sentence__word,.theme--light.sentence__text,.theme--light.scroll-guide__text{color:#040508}.theme--dark.ripple,.theme--dark.reading,.theme--dark.sentence__word,.theme--dark.sentence__text,.theme--dark.scroll-guide__text{color:#fff}.theme--light.ripple:active,.theme--light.reading:active,.theme--light.sentence__word:hover{color:#fff;background:gray radial-gradient(circle, transparent 1%, gray 1%) center/15000%}.theme--dark.ripple:active,.theme--dark.reading:active,.theme--dark.sentence__word:hover{color:#fff;background:#a6a6a6 radial-gradient(circle, transparent 1%, #a6a6a6 1%) center/15000%}.theme--light.sentence__word.reading{color:#fff;background:#666666 radial-gradient(circle, transparent 1%, #666666 1%) center/15000%}.theme--dark.sentence__word.reading{color:#040508;background:#fff radial-gradient(circle, transparent 1%, #fff 1%) center/15000%}.theme--light.page__col__img-placeholder{border:0.046875em dotted gray}.theme--dark.page__col__img-placeholder{border:0.046875em dotted #a6a6a6}.theme--light.scroll-guide__container,.theme--light.overlay__container{border:0.046875em solid gray}.theme--dark.scroll-guide__container,.theme--dark.overlay__container{border:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-left:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-left:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-right:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-right:0.046875em solid #a6a6a6}.theme--light.pages__container{border-top:0.046875em solid gray}.theme--dark.pages__container{border-top:0.046875em solid #a6a6a6}.theme--light.control-panel{border-bottom:0.046875em solid gray}.theme--dark.control-panel{border-bottom:0.046875em solid #a6a6a6}.ripple:hover,.reading:hover,.sentence__word:hover{cursor:pointer}@viewport{width:device-width}button{border:0;cursor:pointer}html{background-color:#fff;box-sizing:border-box;height:100%}*:before,*:after{box-sizing:inherit}body{-webkit-font-smoothing:antialiased;color:#040508;font-family:"Lato", sans-serif;min-height:100%;overflow-x:hidden;overflow-y:hidden;text-rendering:optimizeLegibility}a{background:transparent;color:#c69;text-decoration:none;transition:color 0.2s;outline:none}a:active,a:focus{outline:none}img{height:90%;max-width:90%;object-fit:cover}h1,h2,h3,h4,h5,h6{font-family:"Karla", sans-serif;font-weight:normal}p,mat-chip,mat-tab-label,span,button,a{font-family:"Lato", sans-serif}.theme--light::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--light::-webkit-scrollbar-track{background:#fff}.theme--light::-webkit-scrollbar-thumb{background:#040508;border-radius:0.3125em;height:0.625em;width:0.625em}.theme--dark::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--dark::-webkit-scrollbar-track{background:#3c4369}.theme--dark::-webkit-scrollbar-thumb{background:#fff;border-radius:0.3125em;height:0.625em;width:0.625em}.bg-img{background-image:url("../assets/img/bg.jpg");height:100vh;overflow:overlay;overflow-x:hidden;background-position:center;background-repeat:no-repeat;background-size:cover;min-height:100%}.shadow-box{box-shadow:0 0.3125rem 1rem 0 rgba(0, 0, 0, 0.24);padding:25px;background:rgba(255, 255, 255, 0.94);border-radius:5px}.font-xs{font-size:0.5em}.font-sm{font-size:0.75em}.font-md{font-size:1em}.font-lg{font-size:1.25em}.font-xl{font-size:1.5em}.font-xxl{font-size:2em}.faded{opacity:0.2;color:black}table{table-layout:fixed}.center{margin-left:auto;margin-right:auto;text-align:center}.container{max-width:80em}.background--light{background:#fff}.stop-color--light{fill:#fff}.color--light{color:#040508}.background--dark{background:#3c4369}.stop-color--dark{fill:#3c4369}.color--dark{color:#fff}.abs{position:absolute}.top-0{top:0}.left-0{left:0}.right-0{right:0}.top-5{top:0.3125em}.left-5{left:0.3125em}.right-5{right:0.3125em}.top-10{top:0.625em}.left-10{left:0.625em}.right-10{right:0.625em}.top-15{top:0.9375em}.left-15{left:0.9375em}.right-15{right:0.9375em}.top-20{top:1.25em}.left-20{left:1.25em}.right-20{right:1.25em}.top-25{top:1.5625em}.left-25{left:1.5625em}.right-25{right:1.5625em}.top-30{top:1.875em}.left-30{left:1.875em}.right-30{right:1.875em}.top-35{top:2.1875em}.left-35{left:2.1875em}.right-35{right:2.1875em}.top-40{top:2.5em}.left-40{left:2.5em}.right-40{right:2.5em}.top-45{top:2.8125em}.left-45{left:2.8125em}.right-45{right:2.8125em}.top-50{top:3.125em}.left-50{left:3.125em}.right-50{right:3.125em}.invisible{visibility:hidden !important}.control-panel{border-radius:0 0 0.3125em 0.3125em;position:relative;min-width:100%;display:inline-flex}.control-panel__buttons--left{width:25%;float:left;margin-top:0.3125em;padding:0.3125em}.control-panel__buttons--center{width:25%;text-align:center;margin:0 auto}.control-panel__buttons--right{width:25%;text-align:right;float:right;margin-top:0.3125em;margin-right:0.3125em}.control-panel__buttons__header{margin:0.3125em}.control-panel__control{border-radius:0.3125em;margin:0.5em auto}.control-panel__control:focus{outline:none}.settings{margin-left:0;margin-right:0;text-align:center}.settings__option__header{margin-bottom:0.5em}#waveform{background-size:contain;background-repeat:no-repeat;background-position:center center;width:100%;height:100%;position:absolute;top:0;left:0}.low{z-index:700}.overlay__container{width:100%;max-width:100%;height:3.125em;position:relative;z-index:8000}#overlay__object{z-index:700;max-height:100%;min-width:100%;fill:"transparent"}#overlay__object.theme--light{stroke:gray}#overlay__object.theme--dark{stroke:#a6a6a6}.scroll-guide__container{text-align:center;z-index:700;width:20%;position:fixed;left:50%;transform:translate(-50%, 0)}.scroll-guide__text{font-size:1.25em}.pages__container{overflow:auto;max-height:55vh;height:100%;max-width:100%;width:100%;position:relative;display:-webkit-inline-flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;border-radius:0.3125em 0.3125em 0 0}.page{overflow-y:hidden;overflow-x:auto;flex-grow:1;min-width:99.6%;width:100%;max-width:55em}.page__container{display:grid;grid-template-columns:[col-start] [col-end];grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:"image page-no" "image text";justify-items:stretch}.page__counter{grid-area:page-no;margin:0.625em 0 0 0.9375em;text-align:right;padding-right:0.9375em;max-height:5rem}.page__col__image{grid-area:image;float:left;max-height:100%;text-align:center;margin:5%;padding:0;border-radius:0 0 0 0;position:relative}.page__col__image img{height:100%;max-width:95%;object-fit:contain}.page__col__img-placeholder{cursor:pointer}.page__col__text{grid-area:text}.page.two-column-layout-page{grid-template-columns:40% auto}.page.one-column-layout-page{display:grid;grid-template-columns:auto;grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:"page-no" "text";justify-items:stretch}.page.one-column-layout-page .page__col__image{grid-area:text}.hide-page-counter .page__counter{display:none}.pages__container.vertical{flex-direction:column !important}.pages__container.vertical>.page{min-height:100%}.paragraph__container{overflow-y:auto;min-width:40%;padding-bottom:0.75em}.sentence{margin:0 1.5em;text-align:left;max-width:90%}.sentence__container{margin:3.75em 0.625em 3.75em 0.625em;scroll-behavior:smooth;max-width:100%;position:relative;overflow-y:auto;overflow-x:hidden}.sentence__container__buttons{position:absolute;top:0;right:0}.sentence__text{font-size:1.5em;padding:0}.sentence__word{font-size:1.5em}.sentence__translation .sentence__text,.sentence__translation .sentence__word{color:#777;font-style:italic;font-size:95%}.sentence__translation__button{margin-left:10px}.sentence__translation__button i{font-size:medium}.paragraph.visually_aligned .sentence .sentence__text,.paragraph.visually_aligned .sentence .sentence__word{display:table-cell}.paragraph.visually_aligned .sentence .sentence__text:empty{display:none}.paragraph.visually_aligned{display:table}.paragraph.visually_aligned .sentence{display:table-row}.read-along-container{max-width:75em;margin:0 auto;overflow-y:hidden;overflow-x:hidden;padding:0.3125em;position:relative}.read-along-container--fullscreen{max-width:80%;min-width:80%}.slot__header{margin-bottom:0.3125em}.slot__subheader{margin-top:0;margin-left:1em}.loader{border:16px solid #eee;border-radius:50%;border-right-color:#aa0;border-bottom-color:#a33;border-left-color:#111;width:10rem;height:10rem;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;position:fixed;top:calc(50vh - 10rem);left:calc(50vw - 10rem);z-index:1000;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.alert{position:relative;padding:1rem 1rem;margin-bottom:1rem;border:1px solid transparent;border-radius:0.25rem;transition-delay:2s;transition:visibility 5s height 5s}.alert.status-success{color:#0f5132;background-color:#d1e7dd;border-color:#badbcc}.alert.status-error{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert.fade{visibility:collapse;height:0 !important;overflow:hidden !important;line-height:0 !important;padding:0 !important;margin:0 !important;border:0 !important}.animate-transition,.ripple,.reading{transition:background 0.4s}.animate-transition:active,.ripple:active,.reading:active{transition:background 0s}.ripple,.reading{background-position:center;padding:0.0625em}.ripple:active,.reading:active{background-size:100%}.progress{position:absolute;top:0;left:0;height:100%;width:0}.progress.theme--light{background-color:rgba(128, 128, 128, 0.2)}.progress.theme--dark{background-color:rgba(166, 166, 166, 0.2)}[contenteditable][data-placeholder]:empty:before{content:attr(data-placeholder);position:absolute;color:gray;cursor:text;background-color:transparent}.drop-area{border:2px dashed #ccc;border-radius:20px;width:50%;font-family:sans-serif;margin:50px auto;padding:20px}.drop-area.highlight{border-color:purple}p{margin-top:0}.my-form{margin-bottom:10px}#gallery{margin-top:10px}#gallery img{width:150px;margin-bottom:10px;margin-right:10px;vertical-align:middle}.button{display:inline-block;padding:10px;background:#ccc;cursor:pointer;border-radius:5px;border:1px solid #ccc}.button:hover{background:#ddd}.fileElem{display:none}#img-remover{margin:60px;position:absolute;z-index:9999;border-radius:50px;color:red}#image-container{display:contents}'}}]);